<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>INEX Developer Dashboard â€” Message Management</title>
  <meta name="description" content="Developer dashboard for managing INEX project communications and status updates" />
  <link rel="icon" type="image/svg+xml" href="vite.svg" />
  <link rel="alternate icon" type="image/x-icon" href="vite.ico" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root{
      --inex-charcoal:#191919;
      --maroon:#A62E3F; --maroon-700:#7c2330;
      --ink:#e8ecf6; --muted:#9fa8bc; --border:rgba(255,255,255,.12);
      --bg:#08090e; --panel:rgba(18,20,28,.65); --panel-ink:#e9edf7;
      --accent:#FFB200; --accent-ink:#111;
      --radius:16px; --radius-sm:12px;
      --shadow:0 24px 60px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.05);
      --success:#22c55e; --warning:#f59e0b; --error:#ef4444; --info:#3b82f6;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--panel-ink);
         font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
         letter-spacing:.2px}

    /* Topbar */
    .topbar{position:sticky;top:0;z-index:50;display:flex;align-items:center;gap:.8rem;padding:.9rem 1.1rem;background:linear-gradient(180deg, rgba(8,9,14,.9), rgba(8,9,14,.6));border-bottom:1px solid var(--border);backdrop-filter: blur(10px)}
    .brand{display:flex;align-items:center;gap:.7rem;font-weight:900}
    .brand img{height:34px;width:auto;filter:drop-shadow(0 2px 8px rgba(0,0,0,.35))}
    .spacer{flex:1}
    .btn{display:inline-flex;align-items:center;gap:.5rem;padding:.55rem .8rem;border-radius:12px;border:1px solid transparent;text-decoration:none;font-weight:800;cursor:pointer;transition:all 0.2s ease}
    .btn.primary{background:var(--maroon);color:#fff;border-color:var(--maroon-700)}
    .btn.primary:hover{background:var(--maroon-700);transform:translateY(-1px)}
    .btn.secondary{background:rgba(255,255,255,.06);color:#fff;border-color:rgba(255,255,255,.22)}
    .btn.secondary:hover{background:rgba(255,255,255,.1)}
    .btn.success{background:var(--success);color:#fff;border-color:var(--success)}
    .btn.warning{background:var(--warning);color:#fff;border-color:var(--warning)}
    .btn.error{background:var(--error);color:#fff;border-color:var(--error)}
    .btn.info{background:var(--info);color:#fff;border-color:var(--info)}
    .btn.small{padding:.4rem .6rem;font-size:12px}
    .btn:disabled{opacity:.5;cursor:not-allowed}

    /* Layout */
    main{padding:18px;max-width:1400px;margin-inline:auto}
    .grid{display:grid;gap:16px}
    .grid-cols-2{grid-template-columns:1fr 1fr}
    .grid-cols-3{grid-template-columns:1fr 1fr 1fr}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .head{padding:12px 14px;background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));border-bottom:1px solid var(--border);font-weight:900;display:flex;justify-content:space-between;align-items:center}
    .body{padding:14px}
    .muted{color:var(--muted)}
    .pill{display:inline-block;background:rgba(255,255,255,.06);border:1px solid var(--border);border-radius:999px;padding:.35rem .65rem;font-size:12px;color:var(--panel-ink)}
    .pill.success{background:rgba(34,197,94,.15);border-color:rgba(34,197,94,.3);color:var(--success)}
    .pill.warning{background:rgba(245,158,11,.15);border-color:rgba(245,158,11,.3);color:var(--warning)}
    .pill.error{background:rgba(239,68,68,.15);border-color:rgba(239,68,68,.3);color:var(--error)}
    .pill.info{background:rgba(59,130,246,.15);border-color:rgba(59,130,246,.3);color:var(--info)}

    /* Message styles */
    .message{background:rgba(255,255,255,.02);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px;transition:all 0.2s ease}
    .message:hover{background:rgba(255,255,255,.04);border-color:var(--accent)}
    .message.unread{border-left:4px solid var(--accent);background:rgba(255,178,0,.05)}
    .message.urgent{border-left:4px solid var(--error);background:rgba(239,68,68,.05)}
    .message-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}
    .message-meta{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .message-text{margin:8px 0;line-height:1.5}
    .message-actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
    .message-responses{margin-top:12px;padding-top:12px;border-top:1px solid var(--border)}
    .response{background:rgba(59,130,246,.1);border:1px solid rgba(59,130,246,.2);border-radius:8px;padding:8px;margin-top:8px}
    .response-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;font-size:12px;color:var(--muted)}

    /* Forms */
    .form-group{margin-bottom:16px}
    .form-label{display:block;margin-bottom:6px;font-weight:600;color:var(--accent)}
    .form-input,.form-textarea{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:8px;background:var(--panel);color:var(--panel-ink);font-size:14px;transition:border-color 0.2s ease}
    .form-input:focus,.form-textarea:focus{outline:none;border-color:var(--accent)}
    .form-textarea{resize:vertical;min-height:80px}

    /* Status indicators */
    .status-badge{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:6px;font-size:11px;font-weight:700}
    .status-new{background:rgba(59,130,246,.15);color:var(--info);border:1px solid rgba(59,130,246,.3)}
    .status-read{background:rgba(34,197,94,.15);color:var(--success);border:1px solid rgba(34,197,94,.3)}
    .status-responded{background:rgba(245,158,11,.15);color:var(--warning);border:1px solid rgba(245,158,11,.3)}
    .status-archived{background:rgba(107,114,128,.15);color:var(--muted);border:1px solid rgba(107,114,128,.3)}

    /* Priority indicators */
    .priority-badge{display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:700}
    .priority-low{background:rgba(34,197,94,.15);color:var(--success)}
    .priority-normal{background:rgba(59,130,246,.15);color:var(--info)}
    .priority-high{background:rgba(245,158,11,.15);color:var(--warning)}
    .priority-urgent{background:rgba(239,68,68,.15);color:var(--error)}

    /* Loading states */
    .loading{opacity:.6;pointer-events:none}
    .spinner{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:var(--accent);animation:spin 1s ease-in-out infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Responsive */
    @media(max-width:768px){
      .grid-cols-2,.grid-cols-3{grid-template-columns:1fr}
      .message-header{flex-direction:column;align-items:flex-start;gap:8px}
      .message-actions{flex-direction:column}
      .btn{width:100%;justify-content:center}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="inex-logo.png" alt="INEX Systems & Designs" />
      <span>Developer Dashboard</span>
      <small style="opacity:.85;font-weight:700">Â· Message Management</small>
    </div>
    <div class="spacer"></div>
    <button id="refreshBtn" class="btn secondary"><i class="fa-solid fa-sync-alt"></i> Refresh</button>
    <a href="status.html" class="btn secondary" target="_blank"><i class="fa-solid fa-external-link-alt"></i> View Public Status</a>
  </header>

  <main>
    <!-- Stats Overview -->
    <section class="grid grid-cols-4" style="margin-bottom:20px">
      <div class="card">
        <div class="body" style="text-align:center">
          <div style="font-size:24px;font-weight:900;color:var(--accent)" id="totalMessages">-</div>
          <div class="muted">Total Messages</div>
        </div>
      </div>
      <div class="card">
        <div class="body" style="text-align:center">
          <div style="font-size:24px;font-weight:900;color:var(--info)" id="unreadMessages">-</div>
          <div class="muted">Unread</div>
        </div>
      </div>
      <div class="card">
        <div class="body" style="text-align:center">
          <div style="font-size:24px;font-weight:900;color:var(--warning)" id="pendingMessages">-</div>
          <div class="muted">Pending Response</div>
        </div>
      </div>
      <div class="card">
        <div class="body" style="text-align:center">
          <div style="font-size:24px;font-weight:900;color:var(--success)" id="respondedMessages">-</div>
          <div class="muted">Responded</div>
        </div>
      </div>
    </section>

    <!-- Message Management -->
    <section class="grid grid-cols-3">
      <!-- Message List -->
      <div class="card" style="grid-column:span 2">
        <div class="head">
          <span>ðŸ“¨ Client Messages</span>
          <div style="display:flex;gap:8px">
            <select id="statusFilter" class="form-input" style="width:auto;padding:6px 8px;font-size:12px">
              <option value="">All Status</option>
              <option value="new">New</option>
              <option value="read">Read</option>
              <option value="responded">Responded</option>
              <option value="archived">Archived</option>
            </select>
            <select id="priorityFilter" class="form-input" style="width:auto;padding:6px 8px;font-size:12px">
              <option value="">All Priority</option>
              <option value="low">Low</option>
              <option value="normal">Normal</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
        </div>
        <div class="body">
          <div id="messagesList">
            <div style="text-align:center;padding:40px;color:var(--muted)">
              <i class="fa-solid fa-spinner fa-spin" style="font-size:24px;margin-bottom:16px;display:block"></i>
              Loading messages...
            </div>
          </div>
        </div>
      </div>

      <!-- Message Response Panel -->
      <div class="card">
        <div class="head">
          <span>ðŸ’¬ Respond to Message</span>
        </div>
        <div class="body">
          <div id="responsePanel" style="text-align:center;padding:20px;color:var(--muted)">
            <i class="fa-solid fa-comment-dots" style="font-size:32px;margin-bottom:16px;display:block;opacity:.5"></i>
            <p>Select a message to respond</p>
          </div>
          
          <form id="responseForm" style="display:none">
            <div class="form-group">
              <label class="form-label">Message Preview</label>
              <div id="messagePreview" style="background:rgba(255,255,255,.02);border:1px solid var(--border);border-radius:8px;padding:12px;font-size:13px;line-height:1.4;min-height:60px"></div>
            </div>
            
            <div class="form-group">
              <label class="form-label">Your Response</label>
              <textarea id="responseText" class="form-textarea" placeholder="Type your response here..." required></textarea>
            </div>
            
            <div class="form-group">
              <label class="form-label">Update Status</label>
              <select id="statusUpdate" class="form-input">
                <option value="read">Mark as Read</option>
                <option value="responded">Mark as Responded</option>
                <option value="in-progress">Mark as In Progress</option>
                <option value="resolved">Mark as Resolved</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="form-label">Priority</label>
              <select id="priorityUpdate" class="form-input">
                <option value="low">Low</option>
                <option value="normal">Normal</option>
                <option value="high">High</option>
                <option value="urgent">Urgent</option>
              </select>
            </div>
            
            <button type="submit" class="btn success" style="width:100%">
              <i class="fa-solid fa-paper-plane"></i> Send Response
            </button>
          </form>
        </div>
      </div>
    </section>

    <!-- Quick Actions -->
    <section class="card" style="margin-top:16px">
      <div class="head">âš¡ Quick Actions</div>
      <div class="body">
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button id="markAllReadBtn" class="btn info">
            <i class="fa-solid fa-check-double"></i> Mark All as Read
          </button>
          <button id="exportMessagesBtn" class="btn secondary">
            <i class="fa-solid fa-download"></i> Export Messages
          </button>
          <button id="clearArchivedBtn" class="btn warning">
            <i class="fa-solid fa-trash"></i> Clear Archived
          </button>
          <button id="testMessageBtn" class="btn primary">
            <i class="fa-solid fa-plus"></i> Send Test Message
          </button>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Global state
    let messages = [];
    let selectedMessageId = null;
    let filters = { status: '', priority: '' };

    // API endpoints
    const API_BASE = window.location.origin;
    const MESSAGES_API = `${API_BASE}/api/messages`;
    const MESSAGE_MANAGER_API = `${API_BASE}/api/message-manager`;

    // Initialize dashboard
    document.addEventListener('DOMContentLoaded', function() {
      loadMessages();
      setupEventListeners();
      setupFilters();
    });

    // Event listeners
    function setupEventListeners() {
      document.getElementById('refreshBtn').addEventListener('click', loadMessages);
      document.getElementById('responseForm').addEventListener('submit', handleResponse);
      document.getElementById('markAllReadBtn').addEventListener('click', markAllAsRead);
      document.getElementById('exportMessagesBtn').addEventListener('click', exportMessages);
      document.getElementById('clearArchivedBtn').addEventListener('click', clearArchived);
      document.getElementById('testMessageBtn').addEventListener('click', sendTestMessage);
    }

    // Setup filters
    function setupFilters() {
      document.getElementById('statusFilter').addEventListener('change', function() {
        filters.status = this.value;
        applyFilters();
      });
      
      document.getElementById('priorityFilter').addEventListener('click', function() {
        filters.priority = this.value;
        applyFilters();
      });
    }

    // Load messages from API
    async function loadMessages() {
      try {
        const response = await fetch(MESSAGES_API);
        if (!response.ok) throw new Error('Failed to fetch messages');
        
        const data = await response.json();
        messages = data.messages || [];
        
        updateStats();
        displayMessages();
        
      } catch (error) {
        console.error('Error loading messages:', error);
        showError('Failed to load messages: ' + error.message);
      }
    }

    // Display messages
    function displayMessages() {
      const messagesList = document.getElementById('messagesList');
      const filteredMessages = applyFilters();
      
      if (filteredMessages.length === 0) {
        messagesList.innerHTML = `
          <div style="text-align:center;padding:40px;color:var(--muted)">
            <i class="fa-solid fa-inbox" style="font-size:32px;margin-bottom:16px;display:block;opacity:.5"></i>
            <p>No messages found</p>
          </div>
        `;
        return;
      }

      messagesList.innerHTML = filteredMessages.map(message => `
        <div class="message ${message.read ? '' : 'unread'} ${message.priority === 'urgent' ? 'urgent' : ''}" data-id="${message.id}">
          <div class="message-header">
            <div class="message-meta">
              <strong>${message.name || 'Anonymous'}</strong>
              <span class="status-badge status-${message.status}">${message.status}</span>
              <span class="priority-badge priority-${message.priority}">${message.priority}</span>
              <small class="muted">${formatTimestamp(message.timestamp)}</small>
            </div>
            <div style="display:flex;gap:4px">
              <button class="btn small secondary" onclick="selectMessage('${message.id}')">
                <i class="fa-solid fa-reply"></i>
              </button>
              <button class="btn small warning" onclick="toggleRead('${message.id}')">
                <i class="fa-solid fa-${message.read ? 'eye-slash' : 'eye'}"></i>
              </button>
            </div>
          </div>
          
          <div class="message-text">${message.text}</div>
          
          ${message.email ? `<div class="muted"><i class="fa-solid fa-envelope"></i> ${message.email}</div>` : ''}
          
          <div class="message-actions">
            <button class="btn small ${message.read ? 'secondary' : 'info'}" onclick="toggleRead('${message.id}')">
              ${message.read ? 'Mark Unread' : 'Mark Read'}
            </button>
            <button class="btn small success" onclick="selectMessage('${message.id}')">
              Respond
            </button>
            <button class="btn small warning" onclick="archiveMessage('${message.id}')">
              Archive
            </button>
          </div>
          
          ${message.responses && message.responses.length > 0 ? `
            <div class="message-responses">
              <strong>Responses:</strong>
              ${message.responses.map(response => `
                <div class="response">
                  <div class="response-header">
                    <span>${response.responder}</span>
                    <small>${formatTimestamp(response.timestamp)}</small>
                  </div>
                  <div>${response.text}</div>
                </div>
              `).join('')}
            </div>
          ` : ''}
        </div>
      `).join('');
    }

    // Apply filters
    function applyFilters() {
      let filtered = messages;
      
      if (filters.status) {
        filtered = filtered.filter(msg => msg.status === filters.status);
      }
      
      if (filters.priority) {
        filtered = filtered.filter(msg => msg.priority === filters.priority);
      }
      
      return filtered;
    }

    // Select message for response
    function selectMessage(messageId) {
      selectedMessageId = messageId;
      const message = messages.find(m => m.id === messageId);
      
      if (!message) return;
      
      // Show response panel
      document.getElementById('responsePanel').style.display = 'none';
      document.getElementById('responseForm').style.display = 'block';
      
      // Update message preview
      document.getElementById('messagePreview').textContent = message.text;
      
      // Set current values
      document.getElementById('statusUpdate').value = message.responded ? 'responded' : 'read';
      document.getElementById('priorityUpdate').value = message.priority;
      
      // Scroll to response panel
      document.querySelector('.card:last-child').scrollIntoView({ behavior: 'smooth' });
    }

    // Handle response submission
    async function handleResponse(e) {
      e.preventDefault();
      
      if (!selectedMessageId) return;
      
      const responseText = document.getElementById('responseText').value.trim();
      const statusUpdate = document.getElementById('statusUpdate').value;
      const priorityUpdate = document.getElementById('priorityUpdate').value;
      
      if (!responseText) {
        showError('Please enter a response');
        return;
      }
      
      try {
        const response = await fetch(MESSAGE_MANAGER_API, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            id: selectedMessageId,
            response: responseText,
            status: statusUpdate,
            priority: priorityUpdate
          })
        });
        
        if (!response.ok) throw new Error('Failed to send response');
        
        // Reload messages
        await loadMessages();
        
        // Reset form
        document.getElementById('responseForm').reset();
        document.getElementById('responsePanel').style.display = 'block';
        document.getElementById('responseForm').style.display = 'none';
        
        selectedMessageId = null;
        
        showSuccess('Response sent successfully!');
        
      } catch (error) {
        console.error('Error sending response:', error);
        showError('Failed to send response: ' + error.message);
      }
    }

    // Toggle read status
    async function toggleRead(messageId) {
      try {
        const message = messages.find(m => m.id === messageId);
        const newReadStatus = !message.read;
        
        const response = await fetch(MESSAGE_MANAGER_API, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            id: messageId,
            read: newReadStatus
          })
        });
        
        if (!response.ok) throw new Error('Failed to update message');
        
        await loadMessages();
        
      } catch (error) {
        console.error('Error toggling read status:', error);
        showError('Failed to update message: ' + error.message);
      }
    }

    // Archive message
    async function archiveMessage(messageId) {
      if (!confirm('Are you sure you want to archive this message?')) return;
      
      try {
        const response = await fetch(MESSAGE_MANAGER_API, {
          method: 'DELETE',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ id: messageId })
        });
        
        if (!response.ok) throw new Error('Failed to archive message');
        
        await loadMessages();
        showSuccess('Message archived successfully');
        
      } catch (error) {
        console.error('Error archiving message:', error);
        showError('Failed to archive message: ' + error.message);
      }
    }

    // Mark all as read
    async function markAllAsRead() {
      if (!confirm('Mark all unread messages as read?')) return;
      
      try {
        const unreadMessages = messages.filter(m => !m.read);
        
        for (const message of unreadMessages) {
          await fetch(MESSAGE_MANAGER_API, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              id: message.id,
              read: true
            })
          });
        }
        
        await loadMessages();
        showSuccess('All messages marked as read');
        
      } catch (error) {
        console.error('Error marking all as read:', error);
        showError('Failed to mark all as read: ' + error.message);
      }
    }

    // Export messages
    function exportMessages() {
      const dataStr = JSON.stringify(messages, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      
      const link = document.createElement('a');
      link.href = URL.createObjectURL(dataBlob);
      link.download = `inex-messages-${new Date().toISOString().split('T')[0]}.json`;
      link.click();
    }

    // Clear archived messages
    async function clearArchived() {
      if (!confirm('This will permanently delete all archived messages. Continue?')) return;
      
      try {
        const archivedMessages = messages.filter(m => m.status === 'archived');
        
        for (const message of archivedMessages) {
          await fetch(MESSAGE_MANAGER_API, {
            method: 'DELETE',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ id: message.id })
          });
        }
        
        await loadMessages();
        showSuccess('Archived messages cleared successfully');
        
      } catch (error) {
        console.error('Error clearing archived messages:', error);
        showError('Failed to clear archived messages: ' + error.message);
      }
    }

    // Send test message
    async function sendTestMessage() {
      try {
        const response = await fetch(MESSAGES_API, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: 'Developer Test',
            text: 'This is a test message from the developer dashboard to verify the messaging system is working correctly.',
            email: 'dev@inexsystemsdesigns.com',
            priority: 'normal',
            category: 'test'
          })
        });
        
        if (!response.ok) throw new Error('Failed to send test message');
        
        await loadMessages();
        showSuccess('Test message sent successfully!');
        
      } catch (error) {
        console.error('Error sending test message:', error);
        showError('Failed to send test message: ' + error.message);
      }
    }

    // Update statistics
    function updateStats() {
      const total = messages.length;
      const unread = messages.filter(m => !m.read).length;
      const pending = messages.filter(m => !m.responded && m.status !== 'archived').length;
      const responded = messages.filter(m => m.responded).length;
      
      document.getElementById('totalMessages').textContent = total;
      document.getElementById('unreadMessages').textContent = unread;
      document.getElementById('pendingMessages').textContent = pending;
      document.getElementById('respondedMessages').textContent = responded;
    }

    // Utility functions
    function formatTimestamp(timestamp) {
      const date = new Date(timestamp);
      const now = new Date();
      const diff = now - date;
      
      if (diff < 60000) return 'Just now';
      if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;
      if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;
      return date.toLocaleDateString();
    }

    function showSuccess(message) {
      // Simple success notification
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; background: var(--success); color: white;
        padding: 12px 16px; border-radius: 8px; z-index: 1000; font-weight: 600;
        animation: slideIn 0.3s ease-out;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => notification.remove(), 3000);
    }

    function showError(message) {
      // Simple error notification
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; background: var(--error); color: white;
        padding: 12px 16px; border-radius: 8px; z-index: 1000; font-weight: 600;
        animation: slideIn 0.3s ease-out;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => notification.remove(), 5000);
    }

    // Add CSS animation
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
    `;
    document.head.appendChild(style);

    // Auto-refresh every 30 seconds
    setInterval(loadMessages, 30000);
  </script>
</body>
</html>
