<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>INEX Mobile Demo — iPhone Frame</title>
  <meta name="description" content="Interactive mobile preview of the INEX Systems Portal inside an iPhone frame." />
  <style>
    :root{
      --screen-w:390px; /* iPhone 14/15 CSS pixels */
      --screen-h:844px;
      --bezel:16px;
      --radius:44px; /* outer frame radius */
      --bg: #0b0c10;
      --frame-edge:#0a0a0a;
      --frame-highlight: rgba(255,255,255,.12);
      --frame-shadow: rgba(0,0,0,.75);
      --device-color: #000; /* overridden by themes */
      --accent:#FFB200;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1000px 600px at 20% 10%, #111 0%, #0b0c10 40%, #000 100%);
      color:#ddd;
      font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans";
      display:grid;
      place-items:center;
      padding:24px;
      gap:20px;
    }
    /* Animated presentation background */
    .back-blob{ position:fixed; width:540px; height:540px; border-radius:50%; filter: blur(80px); opacity:.22; z-index:-1; pointer-events:none }
    .back-blob.b1{ background: conic-gradient(from 90deg, #A62E3F, #FFB200, #A62E3F); top:-120px; left:-120px; animation: float1 16s ease-in-out infinite alternate }
    .back-blob.b2{ background: conic-gradient(from -40deg, #0072ff, #00c6ff, #0072ff); bottom:-160px; right:-160px; animation: float2 18s ease-in-out infinite alternate }
    @keyframes float1{ to{ transform: translate(40px, 40px) scale(1.08) rotate(15deg) } }
    @keyframes float2{ to{ transform: translate(-60px, -20px) scale(1.06) rotate(-12deg) } }
    .intro{
      text-align:center;
      max-width:800px;
      color:#bdbdbd;
    }
    .intro h1{margin:.2rem 0 .4rem 0;color:#fff;font-size:22px}
    .intro p{margin:.2rem 0;}
    .device{
      position:relative;
      width: calc(var(--screen-w) + var(--bezel) * 2);
      height: calc(var(--screen-h) + var(--bezel) * 2);
      background: var(--device-color);
      border-radius: var(--radius);
      box-shadow:
        0 24px 70px var(--frame-shadow),
        0 12px 28px rgba(0,0,0,.65),
        inset 0 0 0 2px var(--frame-highlight),
        inset 0 0 0 1px rgba(255,255,255,.1);
      padding: var(--bezel);
      display:flex;
      align-items:stretch;
      justify-content:center;
      isolation:isolate;
      transition: transform .25s ease;
    }
    .device[data-color="silver"]{ --device-color:#f6f6f8; --frame-highlight: rgba(255,255,255,.7) }
    .device[data-color="titanium"]{ --device-color:#3f3f45 }
    .device[data-color="midnight"]{ --device-color:#0a0a0a }
    .device.rotated{ transform: rotate(90deg) }
    .screen{
      position:relative;
      width: var(--screen-w);
      height: var(--screen-h);
      background:#000;
      border-radius: 36px;
      overflow:hidden;
    }
    .screen .overlay{ position:absolute; inset:0; pointer-events:none; z-index:8 }
    .screen .overlay.hidden{ display:none }
    .screen .overlay .spot{ position:absolute; inset:0; background: radial-gradient(circle at 50% 50%, transparent 120px, rgba(0,0,0,.55) 170px); transition: background .25s ease }
    .screen .overlay .badge{ position:absolute; top:10px; right:12px; background:rgba(0,0,0,.5); color:#fff; padding:.25rem .5rem; border-radius:8px; font-size:11px; border:1px solid rgba(255,255,255,.15) }
    .screen iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
      background:#000;
      border-radius:inherit;
      -webkit-overflow-scrolling: touch;
    }
    .screen::after{
      content:"";
      position:absolute; inset:0; pointer-events:none;
      background: linear-gradient(110deg, rgba(255,255,255,.06) 0%, rgba(255,255,255,0) 35%),
                  radial-gradient(800px 400px at -10% -10%, rgba(255,255,255,.05) 0%, rgba(255,255,255,0) 60%);
      mix-blend-mode: screen;
    }
    /* Dynamic island / notch */
    .notch{
      content:"";
      position:absolute;
      z-index:5;
      top: var(--bezel);
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 32px;
      background:#000;
      border-bottom-left-radius:18px;
      border-bottom-right-radius:18px;
      box-shadow: 0 2px 8px rgba(0,0,0,.6);
    }
    .notch::before, .notch::after{
      content:""; position:absolute; top:9px; width:8px; height:8px; border-radius:50%; background:#101010; box-shadow: inset 0 0 0 1px rgba(255,255,255,.08)
    }
    .notch::before{ left:14px }
    .notch::after{ right:14px }
    /* faux status bar */
    .statusbar{
      position:absolute; z-index:6; top: calc(var(--bezel) + 2px); left:0; right:0; height:20px; display:flex; align-items:center; justify-content:space-between; padding:0 26px; color:#f5f5f5; font-size:12px; letter-spacing:.2px; pointer-events:none;
      text-shadow: 0 1px 1px rgba(0,0,0,.6);
    }
    .sb-right{ display:flex; align-items:center; gap:6px }
    .sig,.wifi{ width:14px; height:10px; border-radius:2px; background:linear-gradient(to top, #fff, #bdbdbd); opacity:.9 }
    .bat{ position:relative; width:22px; height:10px; border:1.6px solid #fff; border-radius:2px }
    .bat::after{ content:""; position:absolute; right:-3px; top:2px; width:2px; height:6px; background:#fff; border-radius:1px }
    .bat .lvl{ position:absolute; inset:1px; width:70%; background:#fff; border-radius:1px }
    /* home indicator */
    .home-indicator{ position:absolute; z-index:6; left:50%; transform:translateX(-50%); bottom: calc(var(--bezel) + 6px); width:120px; height:4px; background:#fff; opacity:.6; border-radius:999px; pointer-events:none }
    /* Subtle side buttons */
    .btns-left, .btns-right{
      position:absolute; top:120px; width:3px; height:48px; background:#1a1a1a;border-radius:3px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .btns-left{ left:-2px }
    .btns-right{ right:-2px; top:180px }

    .toolbar{
      display:flex; gap:.6rem; flex-wrap:wrap; align-items:center; justify-content:center;
      color:#aaa; font-size:13px;
    }
    .toolbar a, .toolbar button{
      appearance:none; border:1px solid #2a2a2a; background:#121212; color:#eee; padding:.55rem .8rem; border-radius:10px; cursor:pointer; text-decoration:none; font-weight:600;
    }
    .toolbar a:hover, .toolbar button:hover{ filter:brightness(1.05) }
    .toolbar small{opacity:.8}
    .toolbar select{ appearance:none; border:1px solid #2a2a2a; background:#121212; color:#eee; padding:.5rem .7rem; border-radius:10px; cursor:pointer }
    .toolbar .divider{ width:1px; height:28px; background:#2a2a2a; margin:0 .4rem }

    .demo-caption{ max-width:760px; text-align:center; color:#cfcfcf; background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.12); padding:.7rem .9rem; border-radius:12px }
    .demo-caption b{ color:#fff }

    @media (max-width: 900px){
      body{ padding:18px }
      .intro{ display:none }
    }
    /* Clean stage for screenshots/recording */
    .clean-stage .intro, .clean-stage .toolbar{ display:none !important }
  </style>
</head>
<body>
  <div class="intro" aria-hidden="false">
    <h1>INEX Systems Portal — iPhone Mobile Demo</h1>
    <p>Live, scrollable mobile layout of the same app you see on the desktop. All navigation is clickable inside the device.</p>
  </div>

  <div class="back-blob b1"></div>
  <div class="back-blob b2"></div>

  <div class="device" role="application" aria-label="iPhone device frame">
    <div class="screen">
      <iframe id="appFrame" title="INEX Mobile App" src="index.html#/dashboard" allow="clipboard-read; clipboard-write"></iframe>
      <div class="overlay hidden" id="screenOverlay">
        <div class="spot" id="spotlight"></div>
        <div class="badge" id="overlayBadge">Live Demo</div>
      </div>
    </div>
    <div class="notch" aria-hidden="true"></div>
    <div class="statusbar" aria-hidden="true">
      <div class="sb-left">9:41</div>
      <div class="sb-right">
        <div class="sig"></div>
        <div class="wifi"></div>
        <div class="bat"><div class="lvl"></div></div>
      </div>
    </div>
    <div class="btns-left" aria-hidden="true"></div>
    <div class="btns-right" aria-hidden="true"></div>
    <div class="home-indicator" aria-hidden="true"></div>
  </div>

  <div class="demo-caption" id="demoCaption">Tip: Use Demo Mode to auto-tour the app with guided highlights.</div>

  <div class="toolbar">
    <button id="btnDashboard">Dashboard</button>
    <button id="btnProjects">Projects</button>
    <button id="btnJobs">Jobs</button>
    <button id="btnInventory">Inventory</button>
    <button id="btnRma">RMA</button>
    <button id="btnSlas">SLAs</button>
    <button id="btnKnowledge">Knowledge</button>
    <button id="btnClients">Clients</button>
    <button id="btnCareers">Careers</button>
    <button id="btnSettings">Settings</button>
    <button id="btnRotate">Rotate</button>
    <label>
      <span style="margin-right:.3rem">Device</span>
      <select id="deviceSize">
        <option value="390x844">iPhone 15/14</option>
        <option value="430x932">iPhone 15 Pro Max</option>
        <option value="375x667">iPhone SE</option>
      </select>
    </label>
    <label>
      <span style="margin-right:.3rem">Color</span>
      <select id="deviceColor">
        <option value="midnight">Midnight</option>
        <option value="titanium">Titanium</option>
        <option value="silver">Silver</option>
      </select>
    </label>
    <span class="divider"></span>
    <label>
      <span style="margin-right:.3rem">Brand Theme</span>
      <select id="brandTheme">
        <option value="inex" selected>INEX (Maroon/Gold)</option>
        <option value="slate">Slate + Gold</option>
        <option value="royal">Royal Blue</option>
        <option value="emerald">Emerald</option>
      </select>
    </label>
    <span class="divider"></span>
    <button id="demoPrev">◀︎ Prev</button>
    <button id="demoPlay">▶︎ Play</button>
    <button id="demoPause" disabled>⏸ Pause</button>
    <button id="demoNext">Next ▶︎</button>
    <label>
      <span style="margin-right:.3rem">Speed</span>
      <select id="demoSpeed">
        <option value="1">Normal</option>
        <option value="0.7">Slow</option>
        <option value="1.5">Fast</option>
      </select>
    </label>
    <span class="divider"></span>
    <button id="btnClean">Clean Stage</button>
    <small>Tip: Use your trackpad/scroll wheel to scroll the app.</small>
  </div>

  <script>
    const frame = document.getElementById('appFrame');
    const setRoute = (route) => { frame.src = `index.html#/${route}` };
    const routes = {
      btnDashboard: 'dashboard',
      btnProjects: 'projects',
      btnJobs: 'jobs',
      btnInventory: 'inventory',
      btnRma: 'rma',
      btnSlas: 'slas',
      btnKnowledge: 'knowledge',
      btnClients: 'clients',
      btnCareers: 'careers',
      btnSettings: 'settings'
    };
    Object.entries(routes).forEach(([buttonId, routeName]) => {
      const button = document.getElementById(buttonId);
      if (button) {
        button.addEventListener('click', () => setRoute(routeName));
      }
    });

    // Device controls
    const deviceEl = document.querySelector('.device');
    const sizeSelect = document.getElementById('deviceSize');
    const colorSelect = document.getElementById('deviceColor');
    const rotateBtn = document.getElementById('btnRotate');

    function setDeviceSize(value){
      const [w,h] = value.split('x').map(Number);
      document.documentElement.style.setProperty('--screen-w', w + 'px');
      document.documentElement.style.setProperty('--screen-h', h + 'px');
      requestAnimationFrame(scaleToFit);
    }
    function setDeviceColor(value){ deviceEl.setAttribute('data-color', value); }
    function toggleRotate(){
      deviceEl.classList.toggle('rotated');
      requestAnimationFrame(scaleToFit);
    }
    if(sizeSelect){ sizeSelect.addEventListener('change', e => setDeviceSize(e.target.value)); }
    if(colorSelect){ colorSelect.addEventListener('change', e => setDeviceColor(e.target.value)); }
    if(rotateBtn){ rotateBtn.addEventListener('click', toggleRotate); }

    function scaleToFit(){
      const rotated = deviceEl.classList.contains('rotated');
      const base = rotated ? 'rotate(90deg)' : '';
      deviceEl.style.transform = `${base} scale(1)`;
      const deviceRect = deviceEl.getBoundingClientRect();
      const toolbarRect = document.querySelector('.toolbar').getBoundingClientRect();
      const introEl = document.querySelector('.intro');
      const introHeight = introEl && getComputedStyle(introEl).display !== 'none' ? introEl.getBoundingClientRect().height : 0;
      const vw = window.innerWidth - 40;
      const vh = window.innerHeight - toolbarRect.height - introHeight - 40;
      const scaleX = vw / deviceRect.width;
      const scaleY = vh / deviceRect.height;
      const scale = Math.min(1, scaleX, scaleY);
      deviceEl.style.transform = `${base} scale(${scale})`;
    }
    window.addEventListener('resize', scaleToFit);
    window.requestAnimationFrame(scaleToFit);

    function injectMobileStylesIntoApp(appDocument) {
      if (appDocument.getElementById('mobile-overrides')) return;
      const styleElement = appDocument.createElement('style');
      styleElement.id = 'mobile-overrides';
      styleElement.textContent = `
        aside{ display:none !important }
        .wrap{ grid-template-columns:1fr !important }
        main{ padding:12px !important; max-width: 460px !important }
        .topbar{ padding:.6rem .9rem !important; border-bottom-width:2px !important }
        .brand img{ height:26px !important }
        .header h1{ font-size:20px !important }
        .muted{ color:#666 !important }
        .cards{ grid-template-columns:1fr !important; gap:.8rem !important }
        .card{ border-radius:14px !important }
        .head{ padding:.7rem .9rem !important; font-size:13px !important }
        .body{ padding:.85rem !important }
        .pill{ padding:.32rem .6rem !important; font-size:12px !important }
        .btn{ padding:.78rem 1rem !important; border-radius:12px !important }
        .btn.primary,.btn.secondary,.btn.ghost{ min-height:44px }
        .diagram{ grid-template-columns:1fr !important }
        .grid-2,.grid-3,.grid-4{ grid-template-columns:1fr !important }
        .table th,.table td{ padding:.6rem .7rem !important }
        .collapsible.collapsed .body{ display:none }
        .collapsible .head{ display:flex; align-items:center; justify-content:space-between }
        .collapsible .head .toggle{ appearance:none; border:1px solid #e6e6e6; background:#fff; padding:.35rem .6rem; border-radius:10px; font-weight:700; cursor:pointer }
      `;
      appDocument.head.appendChild(styleElement);
    }

    function ensureKpiStrip(appDocument){
      const main = appDocument.querySelector('main');
      const view = appDocument.getElementById('view');
      if(!main || !view) return;
      const existing = appDocument.getElementById('mobile-kpis');
      if(existing) return;
      const kpi = appDocument.createElement('section');
      kpi.id = 'mobile-kpis';
      kpi.className = 'cards';
      kpi.innerHTML = `
        <article class="card">
          <div class="head">Today at a Glance</div>
          <div class="body" style="padding:.6rem .85rem">
            <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:.5rem; text-align:center">
              <div><div style="font-weight:800; font-size:18px; color:#111">3</div><div class="muted" style="font-size:12px">Active Sites</div></div>
              <div><div style="font-weight:800; font-size:18px; color:#111">3</div><div class="muted" style="font-size:12px">Open Tickets</div></div>
              <div><div style="font-weight:800; font-size:18px; color:#111">1h</div><div class="muted" style="font-size:12px">Avg Response</div></div>
            </div>
          </div>
        </article>`;
      view.prepend(kpi);
    }

    function ensureFab(appDocument){
      if(appDocument.getElementById('mobile-fab')) return;
      const fab = appDocument.createElement('a');
      fab.id = 'mobile-fab';
      fab.href = '#/jobs';
      fab.textContent = 'New Ticket';
      fab.setAttribute('aria-label','Create new ticket');
      fab.style.position = 'fixed';
      fab.style.right = '16px';
      fab.style.bottom = 'calc(16px + env(safe-area-inset-bottom))';
      fab.style.zIndex = '50';
      fab.style.background = '#A62E3F';
      fab.style.border = '1px solid #8d2634';
      fab.style.color = '#fff';
      fab.style.padding = '.8rem 1rem';
      fab.style.borderRadius = '999px';
      fab.style.boxShadow = '0 6px 18px rgba(166,46,63,.35)';
      fab.style.fontWeight = '800';
      fab.style.textDecoration = 'none';
      appDocument.body.appendChild(fab);
    }

    function reorderDashboardCardsForMobile(appDocument) {
      const cardsContainer = appDocument.querySelector('.cards');
      if (!cardsContainer) return;

      const getCardByTitleStart = (titleStart) => (
        Array.from(cardsContainer.querySelectorAll('.card')).find(card => {
          const head = card.querySelector('.head');
          return head && head.textContent.trim().startsWith(titleStart);
        })
      );

      const quickActionsCard = getCardByTitleStart('Quick Actions');
      if (quickActionsCard) cardsContainer.insertBefore(quickActionsCard, cardsContainer.firstChild);

      const todaysInstallsCard = getCardByTitleStart('Today’s Installs');
      if (todaysInstallsCard && quickActionsCard) cardsContainer.insertBefore(todaysInstallsCard, quickActionsCard.nextSibling);

      const openTicketsCard = getCardByTitleStart('Open Tickets');
      if (openTicketsCard && todaysInstallsCard) cardsContainer.insertBefore(openTicketsCard, todaysInstallsCard.nextSibling);

      const diagramCard = getCardByTitleStart('ClickShare Alone vs. ClickShare Integrated by INEX');
      if (diagramCard) {
        diagramCard.classList.add('collapsible', 'collapsed');
        const head = diagramCard.querySelector('.head');
        if (head && !head.querySelector('.toggle')) {
          const toggleButton = appDocument.createElement('button');
          toggleButton.className = 'toggle';
          toggleButton.textContent = 'Show Diagram';
          head.appendChild(toggleButton);
          toggleButton.addEventListener('click', () => {
            diagramCard.classList.toggle('collapsed');
            toggleButton.textContent = diagramCard.classList.contains('collapsed') ? 'Show Diagram' : 'Hide Diagram';
          });
        }
      }

      if (quickActionsCard) {
        const quickActionsInner = quickActionsCard.querySelector('.body > div');
        if (quickActionsInner) {
          quickActionsInner.style.display = 'grid';
          quickActionsInner.style.gridTemplateColumns = '1fr 1fr';
          quickActionsInner.style.gap = '.6rem';
          quickActionsInner.querySelectorAll('.btn').forEach(btn => { btn.style.width = '100%'; });
        }
      }
    }

    function enhanceAppForMobile() {
      const appDocument = frame.contentDocument;
      if (!appDocument) return;
      injectMobileStylesIntoApp(appDocument);
      const appWindow = frame.contentWindow;
      const applyIfDashboard = () => {
        const hash = appWindow.location.hash.replace('#/', '') || 'dashboard';
        if (hash === 'dashboard') {
          ensureKpiStrip(appDocument);
          reorderDashboardCardsForMobile(appDocument);
          ensureFab(appDocument);
        }
      };
      applyIfDashboard();
      if (appWindow && appWindow.addEventListener) {
        appWindow.addEventListener('hashchange', applyIfDashboard);
      }
      const viewRoot = appDocument.getElementById('view');
      if (viewRoot && appWindow.MutationObserver) {
        const observer = new appWindow.MutationObserver(() => applyIfDashboard());
        observer.observe(viewRoot, { childList: true });
      }
      injectClickRipples(appDocument);
    }

    frame.addEventListener('load', enhanceAppForMobile);

    // Brand theme switcher (updates CSS variables inside the app)
    function applyBrandTheme(theme){
      const doc = frame.contentDocument;
      if(!doc) return;
      const root = doc.documentElement;
      const sets = {
        inex: { maroon:'#A62E3F', maroon600:'#8d2634', accent:'#FFB200' },
        slate: { maroon:'#2b2f36', maroon600:'#1e2228', accent:'#FFB200' },
        royal: { maroon:'#1e3a8a', maroon600:'#172c66', accent:'#60a5fa' },
        emerald: { maroon:'#065f46', maroon600:'#064e3b', accent:'#34d399' }
      };
      const cfg = sets[theme] || sets.inex;
      root.style.setProperty('--inex-maroon', cfg.maroon);
      root.style.setProperty('--inex-maroon-600', cfg.maroon600);
      root.style.setProperty('--accent', cfg.accent);
    }
    const brandTheme = document.getElementById('brandTheme');
    if(brandTheme){ brandTheme.addEventListener('change', e => applyBrandTheme(e.target.value)); }

    // Clean stage toggle
    const btnClean = document.getElementById('btnClean');
    let clean = false;
    if(btnClean){
      btnClean.addEventListener('click', () => {
        clean = !clean;
        document.body.classList.toggle('clean-stage', clean);
        btnClean.textContent = clean ? 'Restore UI' : 'Clean Stage';
        requestAnimationFrame(scaleToFit);
      });
    }

    // Click ripple injection inside the app for delight
    function injectClickRipples(appDocument){
      if(appDocument.getElementById('mobile-ripple-style')) return;
      const css = appDocument.createElement('style');
      css.id = 'mobile-ripple-style';
      css.textContent = `
        .cf-ripple{ position:fixed; width:10px; height:10px; border-radius:50%; background: rgba(166,46,63,.45); transform: translate(-50%, -50%); pointer-events:none; animation: cf-ripple .6s ease-out forwards; box-shadow:0 0 0 4px rgba(166,46,63,.15) }
        @keyframes cf-ripple{ 0%{ opacity:.9; transform: translate(-50%,-50%) scale(.6) } 100%{ opacity:0; transform: translate(-50%,-50%) scale(8) } }
      `;
      appDocument.head.appendChild(css);
      appDocument.addEventListener('click', (e) => {
        const r = appDocument.createElement('div');
        r.className = 'cf-ripple';
        r.style.left = e.clientX + 'px';
        r.style.top = e.clientY + 'px';
        appDocument.body.appendChild(r);
        setTimeout(() => r.remove(), 700);
      });
    }

    // Demo mode with spotlight and captions
    const overlayEl = document.getElementById('screenOverlay');
    const spotEl = document.getElementById('spotlight');
    const captionEl = document.getElementById('demoCaption');
    const playBtn = document.getElementById('demoPlay');
    const pauseBtn = document.getElementById('demoPause');
    const nextBtn = document.getElementById('demoNext');
    const prevBtn = document.getElementById('demoPrev');
    const speedSelect = document.getElementById('demoSpeed');

    let demoIndex = 0, demoTimer = null;
    function findCardByTitle(doc, titleStart){
      const cards = Array.from(doc.querySelectorAll('.card'));
      return cards.find(card => {
        const h = card.querySelector('.head');
        return h && h.textContent.trim().startsWith(titleStart);
      });
    }

    const SCENES = [
      { route:'dashboard', target:(doc)=>findCardByTitle(doc,'Quick Actions'), caption:'Kick off work fast with Quick Actions. Standardized flows reduce clicks.' },
      { route:'dashboard', target:(doc)=>findCardByTitle(doc,'Today’s Installs'), caption:'Today’s Installs keeps field teams aligned and responsive.' },
      { route:'dashboard', target:(doc)=>findCardByTitle(doc,'Open Tickets'), caption:'Tickets integrated with SLAs; risk alerts keep you ahead of breaches.' },
      { route:'projects',  target:(doc)=>findCardByTitle(doc,'RICE · Auditorium — Modernization'), caption:'Project cards summarize phase, ownership and deadlines at a glance.' },
      { route:'jobs',      target:(doc)=>doc.querySelector('.table'), caption:'Dispatch board shows load, priority, and ETAs in one place.' },
      { route:'inventory', target:(doc)=>doc.querySelector('.table'), caption:'Inventory is location-aware with statuses and last scans.' },
      { route:'rma',       target:(doc)=>findCardByTitle(doc,'Open RMAs'), caption:'RMA workflows accelerate vendor replacements with auto-docs.' },
      { route:'slas',      target:(doc)=>findCardByTitle(doc,'This Week'), caption:'Ops performance: response, resolution, and SLA adherence.' },
      { route:'knowledge', target:(doc)=>findCardByTitle(doc,'ClickShare Quick‑Start'), caption:'Knowledge packs drive adoption and reduce support load.' },
      { route:'clients',   target:(doc)=>doc.querySelector('.table'), caption:'Client rollups: sites, rooms, tickets, and ownership.' },
      { route:'careers',   target:(doc)=>findCardByTitle(doc,'Open Roles'), caption:'Branded careers streamline sourcing and onboarding.' },
      { route:'settings',  target:(doc)=>findCardByTitle(doc,'Brand'), caption:'Branding cascades through the portal for a cohesive client experience.' }
    ];

    function navigate(route){
      const hash = `#/${route}`;
      if(frame.contentWindow) frame.contentWindow.location.hash = hash;
      else frame.src = `index.html${hash}`;
    }

    function spotlightTarget(el){
      if(!el) { overlayEl.classList.add('hidden'); return; }
      overlayEl.classList.remove('hidden');
      const targetRect = el.getBoundingClientRect();
      const screenRect = document.querySelector('.screen').getBoundingClientRect();
      const centerX = (targetRect.left - screenRect.left) + targetRect.width/2;
      const centerY = (targetRect.top - screenRect.top) + targetRect.height/2;
      const radius = Math.min(Math.max(targetRect.width, targetRect.height)/2 + 40, 220);
      spotEl.style.background = `radial-gradient(circle at ${centerX}px ${centerY}px, transparent ${radius}px, rgba(0,0,0,.58) ${radius+60}px)`;
    }

    function runScene(i){
      demoIndex = (i + SCENES.length) % SCENES.length;
      const scene = SCENES[demoIndex];
      navigate(scene.route);
      // Wait a moment for render
      setTimeout(() => {
        const doc = frame.contentDocument;
        if(!doc) return;
        const target = scene.target(doc);
        if(target){
          target.scrollIntoView({behavior:'smooth', block:'center'});
          setTimeout(() => {
            spotlightTarget(target);
            if(captionEl) captionEl.innerHTML = `<b>${scene.route.toUpperCase()}</b> — ${scene.caption}`;
          }, 250);
        } else {
          overlayEl.classList.add('hidden');
        }
      }, 250);
    }

    // Wire controls if present
    const playBtn = document.getElementById('demoPlay');
    const pauseBtn = document.getElementById('demoPause');
    const nextBtn = document.getElementById('demoNext');
    const prevBtn = document.getElementById('demoPrev');
    const speedSelect = document.getElementById('demoSpeed');

    function playDemo(){
      if(demoTimer) return; // already playing
      if(playBtn) playBtn.disabled = true; if(pauseBtn) pauseBtn.disabled = false;
      const speed = parseFloat((speedSelect && speedSelect.value) || '1');
      runScene(demoIndex);
      demoTimer = setInterval(() => { runScene(demoIndex+1); }, 3800 / speed);
    }
    function pauseDemo(){
      if(playBtn) playBtn.disabled = false; if(pauseBtn) pauseBtn.disabled = true;
      if(demoTimer){ clearInterval(demoTimer); demoTimer = null; }
    }
    if(playBtn) playBtn.addEventListener('click', playDemo);
    if(pauseBtn) pauseBtn.addEventListener('click', pauseDemo);
    if(nextBtn) nextBtn.addEventListener('click', () => { pauseDemo(); runScene(demoIndex+1); });
    if(prevBtn) prevBtn.addEventListener('click', () => { pauseDemo(); runScene(demoIndex-1); });
    if(speedSelect) speedSelect.addEventListener('change', () => { if(demoTimer){ pauseDemo(); playDemo(); } });
  </script>
</body>
<!-- © Cochran Films — Systems Division -->
</html>


