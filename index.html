<!doctype html>
<html lang="en" data-theme="light">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>INEX Systems Portal ‚Äî Management Dashboard</title>
        <meta name="description" content="INEX Systems & Designs ‚Äî Internal management dashboard for Phase 1: Discovery phase. Project management and status updates." />
<link rel="icon" type="image/svg+xml" href="vite.svg" />
<link rel="alternate icon" type="image/x-icon" href="vite.ico" />
<style>
  :root{
    --inex-charcoal:#191919;
    --maroon:#A62E3F;
    --maroon-700:#7c2330;
    --ink:#111; --muted:#666; --border:#e6e6e6;
    --bg:#f5f6f8; --panel:#ffffff; --panel-ink:#222;
    --accent:#FFB200; --accent-ink:#111;
    --radius:16px; --radius-sm:12px;
    --shadow:0 3px 16px rgba(0,0,0,.08);
  }
  html[data-theme="dark"]{
    --ink:#e8ecf6; --muted:#9fa8bc; --border:rgba(255,255,255,.12);
    --bg:#08090e; --panel:rgba(18,20,28,.65); --panel-ink:#e9edf7;
    --shadow:0 20px 50px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.04);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--panel-ink);
       font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
       letter-spacing:.2px;transition:background-color .25s ease,color .25s ease;}

  /* Topbar */
  .topbar{position:sticky;top:0;z-index:80;display:flex;align-items:center;gap:.75rem;padding:.9rem 1.25rem;background:var(--inex-charcoal);color:#fff;border-bottom:3px solid #2a2a2a}
  html[data-theme="dark"] .topbar{background:linear-gradient(180deg, rgba(8,9,14,.9), rgba(8,9,14,.6));border-bottom:1px solid var(--border);backdrop-filter: blur(10px)}
  .brand{display:flex;align-items:center;gap:.75rem;font-weight:800}
  .brand img{height:36px;width:auto;filter:drop-shadow(0 2px 8px rgba(0,0,0,.35))}
  .brand small{opacity:.8;font-weight:600}
  .spacer{flex:1}
  .toggle{display:inline-flex;align-items:center;gap:.5rem;padding:.45rem .7rem;border-radius:999px;border:1px solid rgba(255,255,255,.25);color:#fff;background:rgba(255,255,255,.06);cursor:pointer;font-weight:800;font-size:12px;text-decoration:none}
  .toggle .dot{width:9px;height:9px;border-radius:50%;background:#FFB200;box-shadow:0 0 10px #ffb20088}
  .pitch-btn{display:inline-flex;align-items:center;gap:.5rem;margin-right:.5rem;padding:.45rem .7rem;border-radius:10px;border:1px solid rgba(255,255,255,.25);background:rgba(255,255,255,.06);color:#fff;text-decoration:none;font-weight:800;cursor:pointer}

  /* Layout */
  .wrap{display:grid;grid-template-columns:260px minmax(0,1fr);min-height:calc(100vh - 64px)}
  aside{background:#fafafa;border-right:1px solid var(--border);padding:1rem}
  html[data-theme="dark"] aside{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01))}
  .nav h3{margin:.25rem 0 .6rem 0;font-size:12px;text-transform:uppercase;letter-spacing:.12em;color:#888}
  html[data-theme="dark"] .nav h3{color:var(--muted)}
  .nav a{display:flex;align-items:center;gap:.6rem;padding:.6rem .7rem;border-radius:10px;color:#333;text-decoration:none;border:1px solid transparent;transition:.18s ease all}
  .nav a:hover,.nav a:focus-visible{background:#f0f0f0}
  .nav a.active{color:var(--maroon);background:#f8f1f2;font-weight:700;border:1px solid #f0d8dc}
  html[data-theme="dark"] .nav a{color:var(--panel-ink)}
  html[data-theme="dark"] .nav a:hover{background:rgba(255,255,255,.05);border-color:var(--border)}
  html[data-theme="dark"] .nav a.active{background:linear-gradient(180deg, rgba(166,46,63,.28), rgba(166,46,63,.18));border-color:#5c2029;color:#fff;box-shadow:0 8px 26px rgba(166,46,63,.25)}

  main{padding:1.25rem;max-width:1400px;margin-inline:auto}
  .header{display:flex;align-items:baseline;gap:1rem;flex-wrap:wrap;margin:.25rem 0 1rem 0}
  .header h1{margin:0;font-size:24px;color:var(--ink)}
  .muted{color:var(--muted)}
  .cards{display:grid;gap:1rem;grid-template-columns:repeat(12,minmax(0,1fr))}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:var(--shadow);transform:translateZ(0)}
  html[data-theme="dark"] .card{backdrop-filter: blur(10px)}
  .head{padding:.8rem 1rem;background:#f8f8f8;border-bottom:1px solid var(--border);font-weight:800}
  html[data-theme="dark"] .head{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02))}
  .body{padding:1rem}
  .list{margin:0;padding-left:1.1rem}.list li{margin:.3rem 0}
  .pill{display:inline-block;background:#f7f7f7;border:1px solid var(--border);border-radius:999px;padding:.35rem .65rem;font-size:12px}
  html[data-theme="dark"] .pill{background:rgba(255,255,255,.06);border-color:var(--border);color:var(--panel-ink)}
  .btn{display:inline-flex;align-items:center;justify-content:center;padding:.8rem 1rem;border-radius:12px;border:1px solid transparent;text-decoration:none;font-weight:800;cursor:pointer;transition:.15s transform ease}
  .btn:hover{transform:translateY(-1px);filter:brightness(.97)}
  .btn.primary{background:var(--maroon);color:#fff;border-color:var(--maroon-700)}
  .btn.secondary{background:var(--accent);color:var(--accent-ink);border-color:#e6a300}
  .btn.ghost{background:#fff;color:var(--maroon);border-color:#e9c6cc}
  html[data-theme="dark"] .btn.ghost{background:rgba(255,255,255,.06);color:#fff;border-color:var(--border)}
  .table{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:12px;overflow:hidden}
  .table th,.table td{padding:.75rem .9rem;border-bottom:1px solid var(--border);text-align:left}
  .table thead th{background:#191919;color:#FFB200;font-weight:800}
  html[data-theme="dark"] .table thead th{background:#11131a}
  .table tr:nth-child(even) td{background:#fbfbfb}
  html[data-theme="dark"] .table tr:nth-child(even) td{background:rgba(255,255,255,.03)}
  .span-4{grid-column:span 4}.span-6{grid-column:span 6}.span-8{grid-column:span 8}.span-12{grid-column:1/-1}

  .footer{color:#999;font-size:12px;text-align:center;padding:1.2rem}
  html[data-theme="dark"] .footer{color:var(--muted)}

  /* Pitch overlay */
  .overlay{position:fixed;inset:0;z-index:90;display:none;background:rgba(0,0,0,.55)}
  .overlay.show{display:block}
  .pitch{position:relative;max-width:1100px;margin:4vh auto;background:var(--panel);color:var(--panel-ink);
         border:1px solid var(--border);border-radius:18px;box-shadow:0 30px 80px rgba(0,0,0,.45);overflow:hidden;
         max-height:92vh;display:flex;flex-direction:column}
  .pitch-head{display:flex;align-items:center;gap:.9rem;padding:14px 18px;background:linear-gradient(135deg,#A62E3F,#5b1520);color:#fff}
  .pitch-scroll{padding:18px;overflow:auto}
  .pitch-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
  .p-card{background:var(--panel);border:1px solid var(--border);border-radius:14px;overflow:hidden}
  .p-card .p-head{padding:10px 14px;background:#191919;color:#FFB200;font-weight:800}
  html[data-theme="dark"] .p-card .p-head{background:#11131a}
  .p-card .p-body{padding:14px}
  .pitch-close{position:absolute;top:8px;right:8px;background:#fff;border:1px solid #eee;border-radius:10px;padding:8px 10px;font-weight:800;cursor:pointer}
  html[data-theme="dark"] .pitch-close{background:rgba(255,255,255,.08);color:#fff;border-color:var(--border)}

  @media (max-width:1000px){
    .wrap{grid-template-columns:1fr}
    .span-4,.span-6,.span-8{grid-column:1/-1}
    .pitch-grid{grid-template-columns:1fr}
  }
</style>
</head>
<body>
<header class="topbar">
  <div class="brand">
    <img src="inex-logo.png" alt="INEX Systems & Designs Logo" />
    <span>INEX Systems Portal</span>
            <small>¬∑ Management Dashboard</small>
  </div>
  <div class="spacer"></div>
  <button class="pitch-btn" id="openPitch">üìã Project Overview</button>
  <a class="toggle" id="themeToggle" href="#"><span class="dot"></span><span id="themeLabel">1.0 Light</span></a>
</header>

<div class="wrap">
  <aside>
    <nav class="nav">
      <h3>Navigation</h3>
      <a href="#/dashboard" data-route="dashboard" class="active">üè† Dashboard</a>
      <a href="#/projects"  data-route="projects">üìÅ Projects</a>
      <a href="#/planning"  data-route="planning">üìã Planning</a>
      <a href="#/status"    data-route="status">üìä Manage Status</a>
    </nav>
  </aside>

  <main id="view"></main>
</div>

<!-- Project Overview Overlay -->
<div class="overlay" id="pitchOverlay" aria-hidden="true">
  <div class="pitch" role="dialog" aria-modal="true" aria-labelledby="pitchTitle">
    <button class="pitch-close" id="closePitch">‚úï Close</button>
    <div class="pitch-head">
      <img src="inex-logo.png" alt="INEX Logo">
      <h2 id="pitchTitle" style="margin:0;font-size:18px;">INEX Systems Portal ‚Äî Phase 1</h2>
              <span style="opacity:.85;font-weight:700;margin-left:.5rem">Discovery Phase</span>
    </div>
    <div class="pitch-scroll">
      <div class="pitch-grid">
        <div class="p-card">
          <div class="p-head">Phase 1: Discovery</div>
          <div class="p-body">
            <h4 style="margin:.2rem 0 .5rem 0">üéØ Current Focus</h4>
            <ul class="list">
              <li><strong>Project Kickoff:</strong> Initial requirements gathering and stakeholder alignment</li>
              <li><strong>Scope Definition:</strong> Understanding INEX's operational needs and system requirements</li>
              <li><strong>Brand Research:</strong> Exploring INEX design direction and visual identity</li>
              <li><strong>Timeline Planning:</strong> Creating project roadmap and milestone structure</li>
            </ul>
            <h4 style="margin:1rem 0 .5rem 0">üìã Next Steps</h4>
            <ul class="list">
              <li>Complete stakeholder interviews and requirements documentation</li>
              <li>Define technical architecture and system requirements</li>
              <li>Create project timeline with key milestones</li>
              <li>Obtain stakeholder approval to proceed to Phase 2</li>
            </ul>
          </div>
        </div>
        <div class="p-card">
          <div class="p-head">Project Overview</div>
          <div class="p-body">
            <h4 style="margin:.2rem 0 .5rem 0">üèóÔ∏è What We're Building</h4>
            <ul class="list">
              <li><strong>INEX Operations Portal:</strong> Centralized dashboard for INEX team operations</li>
              <li><strong>Project Management:</strong> Tools for tracking installations and client projects</li>
              <li><strong>Inventory System:</strong> Management of ClickShare units and equipment</li>
              <li><strong>Client Portal:</strong> Interface for client access and support</li>
            </ul>
            <div style="margin-top:8px;padding:8px;background:rgba(255,178,0,.1);border:1px solid rgba(255,178,0,.2);border-radius:8px;font-size:12px">
              <strong>üìÖ Timeline:</strong> 4-5 weeks total ‚Ä¢ <strong>üí∞ Investment:</strong> $4,500 + $150/month care plan
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px">
              <a class="btn secondary" href="status.html" target="_blank">üìä View Status</a>
              <a class="btn ghost" href="#/dashboard">Back to Dashboard</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <script>
  /* Views: Phase 1 - Discovery Focus */
  const Views = {
    dashboard: `
      <div class="header"><h1>Welcome to INEX Systems Portal</h1><span class="muted">Phase 1: Discovery ‚Äî Project kickoff and requirements gathering</span></div>
      <section class="cards">
        <article class="card span-6">
          <div class="head">Current Phase: Discovery</div>
          <div class="body">
            <div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem">
              <div style="width:80px;height:80px;border-radius:50%;background:conic-gradient(#A62E3F 5%, #e6e6e6 0);display:grid;place-items:center;border:3px solid #f0f0f0">
                <strong style="font-size:16px">5%</strong>
              </div>
              <div>
                <strong>Project Status: Discovery Phase</strong><br>
                <small class="muted">Requirements gathering and project planning in progress</small>
              </div>
            </div>
            <div style="background:#f8f8f8;border-radius:8px;padding:.8rem;border:1px solid var(--border)">
              <strong>Focus:</strong> Understanding INEX's operational needs, defining project scope, and creating implementation timeline.
            </div>
            <div style="margin-top:1rem;padding:.8rem;background:rgba(166,46,63,.1);border:1px solid rgba(166,46,63,.2);border-radius:8px">
              <strong>üí° Management Note:</strong> This is your internal dashboard. Use the Status Management section to update progress that Zebediah will see on the public status page.
            </div>
          </div>
        </article>
        <article class="card span-6">
          <div class="head">Quick Actions</div>
          <div class="body">
            <div style="display:grid;gap:.6rem">
              <a class="btn primary" href="#/projects">View Project Plan</a>
              <a class="btn secondary" href="#/planning">Planning Documents</a>
              <a class="btn primary" href="#/status">Manage Status</a>
              <a class="btn secondary" href="status.html" target="_blank">Client Status Page</a>
            </div>
          </div>
        </article>
        <article class="card span-8">
          <div class="head">Discovery Phase Objectives</div>
          <div class="body">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
              <div style="border:1px solid var(--border);border-radius:12px;padding:1rem">
                <span class="pill">Requirements</span>
                <ul class="list" style="margin-top:.5rem">
                  <li>Stakeholder interviews</li>
                  <li>Operational workflow analysis</li>
                  <li>System requirements definition</li>
                </ul>
              </div>
              <div style="border:1px solid var(--border);border-radius:12px;padding:1rem">
                <span class="pill">Planning</span>
                <ul class="list" style="margin-top:.5rem">
                  <li>Project timeline creation</li>
                  <li>Resource allocation planning</li>
                  <li>Risk assessment</li>
                </ul>
              </div>
            </div>
          </div>
        </article>
        <article class="card span-4">
          <div class="head">Project Info</div>
          <div class="body">
            <ul class="list">
              <li><strong>Client:</strong> INEX Systems & Designs</li>
              <li><strong>Phase:</strong> 1 - Discovery</li>
              <li><strong>Progress:</strong> 5%</li>
              <li><strong>ETA:</strong> Feb 2025</li>
            </ul>
          </div>
        </article>
      </section>
      <p class="footer">INEX Systems Portal ‚Ä¢ Phase 1: Discovery ‚Ä¢ ¬© Cochran Full Stack Solutions</p>
    `,
    projects: `
      <div class="header"><h1>Project Planning</h1><span class="muted">Discovery phase planning and requirements gathering</span></div>
      <div class="cards">
        <article class="card span-8">
          <div class="head">Discovery Phase Plan</div>
          <div class="body">
            <table class="table">
              <thead><tr><th>Task</th><th>Status</th><th>Owner</th><th>Due Date</th><th>Notes</th></tr></thead>
              <tbody>
                <tr><td>Project kickoff meeting</td><td><span class="pill">In Progress</span></td><td>Project Team</td><td>Dec 15</td><td>Initial requirements gathering</td></tr>
                <tr><td>Stakeholder interviews</td><td><span class="pill">Planned</span></td><td>Project Manager</td><td>Dec 20</td><td>Key personnel interviews</td></tr>
                <tr><td>Requirements documentation</td><td><span class="pill">Planned</span></td><td>Business Analyst</td><td>Dec 25</td><td>Detailed requirements doc</td></tr>
                <tr><td>Technical architecture</td><td><span class="pill">Planned</span></td><td>Technical Lead</td><td>Dec 30</td><td>System design & architecture</td></tr>
                <tr><td>Project timeline</td><td><span class="pill">Planned</span></td><td>Project Manager</td><td>Jan 5</td><td>Complete project roadmap</td></tr>
              </tbody>
            </table>
          </div>
        </article>
        <article class="card span-4">
          <div class="head">Phase 1 Deliverables</div>
          <div class="body">
            <ul class="list">
              <li>Project requirements document</li>
              <li>Technical architecture plan</li>
              <li>Project timeline & milestones</li>
              <li>Resource allocation plan</li>
              <li>Risk assessment document</li>
              <li>Stakeholder approval</li>
            </ul>
          </div>
        </article>
      </div>
    `,
    planning: `
      <div class="header"><h1>Planning Documents</h1><span class="muted">Discovery phase planning and documentation</span></div>
      <div class="cards">
        <article class="card span-6">
          <div class="head">Requirements Gathering</div>
          <div class="body">
            <h4>Key Areas of Focus:</h4>
            <ul class="list">
              <li><strong>Operational Workflows:</strong> Current processes and pain points</li>
              <li><strong>System Integration:</strong> Existing systems and data sources</li>
              <li><strong>User Experience:</strong> Team member needs and preferences</li>
              <li><strong>Scalability:</strong> Future growth and expansion plans</li>
            </ul>
            <div style="margin-top:1rem">
              <a class="btn primary" href="#">Create Requirements Doc</a>
            </div>
          </div>
        </article>
        <article class="card span-6">
          <div class="head">Technical Planning</div>
          <div class="body">
            <h4>Architecture Considerations:</h4>
            <ul class="list">
              <li><strong>Frontend:</strong> Modern web application framework</li>
              <li><strong>Backend:</strong> API design and data management</li>
              <li><strong>Database:</strong> Data structure and relationships</li>
              <li><strong>Security:</strong> Authentication and authorization</li>
            </ul>
            <div style="margin-top:1rem">
              <a class="btn secondary" href="#">Technical Specs</a>
            </div>
          </div>
        </article>
      </div>
    `,
    status: `
      <div class="header"><h1>Status Management</h1><span class="muted">Update project status and progress for client visibility</span></div>
      <div class="cards">
        <article class="card span-8">
          <div class="head">Current Status Overview</div>
          <div class="body">
            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:1rem">
              <div style="text-align:center;padding:1rem;border:1px solid var(--border);border-radius:12px">
                <div style="font-size:24px;font-weight:900;color:var(--maroon)" id="progressDisplay">5%</div>
                <div style="font-size:12px;color:var(--muted)">Overall Progress</div>
              </div>
              <div style="text-align:center;padding:1rem;border:1px solid var(--border);border-radius:12px">
                <div style="font-size:24px;font-weight:900;color:var(--accent)" id="tasksDisplay">1/5</div>
                <div style="font-size:12px;color:var(--muted)">Tasks Complete</div>
              </div>
              <div style="text-align:center;padding:1rem;border:1px solid var(--border);border-radius:12px">
                <div style="font-size:24px;font-weight:900;color:var(--muted)" id="phaseDisplay">Discovery</div>
                <div style="font-size:12px;color:var(--muted)">Current Phase</div>
              </div>
              <div style="text-align:center;padding:1rem;border:1px solid var(--border);border-radius:12px">
                <div style="font-size:24px;font-weight:900;color:var(--muted)" id="etaDisplay">Feb 2025</div>
                <div style="font-size:12px;color:var(--muted)">Phase End</div>
              </div>
            </div>
            <div style="background:#f8f8f8;border-radius:8px;padding:1rem;border:1px solid var(--border);margin-bottom:1rem">
              <strong>Current Status:</strong> <span id="statusText">Project kickoff initiated. Team is conducting initial requirements gathering and stakeholder interviews. Next milestone is completion of requirements documentation by Dec 25.</span>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
              <button class="btn primary" onclick="updateStatus()">Update Status</button>
              <a class="btn secondary" href="status.html" target="_blank">View Public Status</a>
            </div>
            <div style="margin-top:1rem;padding:1rem;background:rgba(0,150,136,.1);border:1px solid rgba(0,150,136,.2);border-radius:8px">
              <strong>üöÄ Live Deployment Controls</strong><br>
              <small>These buttons will update both local status AND deploy live to Zebediah's status page:</small>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:1rem">
                <button class="btn primary" onclick="deployStatusUpdate()">üöÄ Deploy Live Update</button>
                <button class="btn secondary" onclick="deployPhaseChange()">üîÑ Deploy Phase Change</button>
              </div>
            </div>
          </div>
        </article>
        <article class="card span-4">
          <div class="head">Quick Actions</div>
          <div class="body">
            <div style="display:grid;gap:.6rem">
              <button class="btn secondary" onclick="incrementProgress()">+10% Progress</button>
              <button class="btn secondary" onclick="nextPhase()">Next Phase</button>
              <button class="btn secondary" onclick="addUpdate()">Add Update</button>
            </div>
          </div>
        </article>
      </div>
    `
  };

  const view = document.getElementById('view');
  const links = Array.from(document.querySelectorAll('.nav a'));
  function setActive(route){ links.forEach(a => a.classList.toggle('active', a.dataset.route === route)); }

  function render(){
    const route = location.hash.replace('#/','') || 'dashboard';
    setActive(route);
    view.innerHTML = Views[route] || Views.dashboard;
  }
  window.addEventListener('hashchange', render);
  window.addEventListener('load', render);
  
  // Load saved status data when dashboard loads
  window.addEventListener('load', function() {
    // Wait a bit for the DOM to be fully ready
    setTimeout(() => {
      const savedProgress = localStorage.getItem('inex-project-progress');
      const savedPhase = localStorage.getItem('inex-project-phase');
      const savedStatus = localStorage.getItem('inex-project-status');
      
      // Only update if elements exist (they only exist in the status view)
      const progressElement = document.getElementById('progressDisplay');
      const phaseElement = document.getElementById('phaseDisplay');
      const statusElement = document.getElementById('statusText');
      
      if (savedProgress && progressElement) {
        progressElement.textContent = savedProgress + '%';
      }
      if (savedPhase && phaseElement) {
        phaseElement.textContent = savedPhase;
      }
      if (savedStatus && statusElement) {
        statusElement.textContent = savedStatus;
      }
    }, 100);
  });

  /* Theme toggle + persistence */
  const root = document.documentElement;
  const btn = document.getElementById('themeToggle');
  const label = document.getElementById('themeLabel');
  const saved = localStorage.getItem('inex-theme');
  if(saved){ root.setAttribute('data-theme', saved); label.textContent = saved === 'dark' ? '1.0 Light' : '2.0 Dark'; }
  btn.addEventListener('click', (e)=>{
    e.preventDefault();
    const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', next);
    localStorage.setItem('inex-theme', next);
    label.textContent = next === 'dark' ? '1.0 Light' : '2.0 Dark';
  });

  /* Project overview overlay controls */
  const overlay = document.getElementById('pitchOverlay');
  const openPitch = document.getElementById('openPitch');
  const closePitch = document.getElementById('closePitch');
  function openOverlay(){ overlay.classList.add('show'); overlay.setAttribute('aria-hidden','false'); }
  function closeOverlay(){ overlay.classList.remove('show'); overlay.setAttribute('aria-hidden','true'); }
  openPitch.addEventListener('click', openOverlay);
  closePitch.addEventListener('click', closeOverlay);
  overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeOverlay(); });
  window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && overlay.classList.contains('show')) closeOverlay(); });

  // Status Management Functions
  function updateStatus() {
    const newProgress = prompt('Enter new progress percentage (0-100):', '5');
    if (newProgress !== null && !isNaN(newProgress)) {
      const progress = Math.max(0, Math.min(100, parseInt(newProgress)));
      document.getElementById('progressDisplay').textContent = progress + '%';
      
      // Save to localStorage for status.html to read
      localStorage.setItem('inex-project-progress', progress);
      
      // Update status text
      const newStatus = prompt('Enter new status description:', document.getElementById('statusText').textContent);
      if (newStatus !== null) {
        document.getElementById('statusText').textContent = newStatus;
        localStorage.setItem('inex-project-status', newStatus);
      }
      
      // Trigger storage event for real-time updates
      window.dispatchEvent(new StorageEvent('storage', {
        key: 'inex-project-progress',
        newValue: progress.toString()
      }));
    }
  }

  function incrementProgress() {
    const current = parseInt(document.getElementById('progressDisplay').textContent);
    const newProgress = Math.min(100, current + 10);
    document.getElementById('progressDisplay').textContent = newProgress + '%';
    localStorage.setItem('inex-project-progress', newProgress);
    
    // Trigger storage event for real-time updates
    window.dispatchEvent(new StorageEvent('storage', {
      key: 'inex-project-progress',
      newValue: newProgress.toString()
    }));
  }

  function nextPhase() {
    const phases = ['Discovery', 'Design & Setup', 'Development & Testing', 'Deployment & Training'];
    const currentPhase = document.getElementById('phaseDisplay').textContent;
    const currentIndex = phases.indexOf(currentPhase);
    if (currentIndex < phases.length - 1) {
      const nextPhase = phases[currentIndex + 1];
      document.getElementById('phaseDisplay').textContent = nextPhase;
      localStorage.setItem('inex-project-phase', nextPhase);
      
      // Trigger storage event for real-time updates
      window.dispatchEvent(new StorageEvent('storage', {
        key: 'inex-project-phase',
        newValue: nextPhase
      }));
    }
  }

  function addUpdate() {
    const date = prompt('Enter date (e.g., Dec 18):', 'Dec 18');
    if (date !== null) {
      const update = prompt('Enter update description:', '');
      if (update !== null) {
        const status = prompt('Enter status (e.g., In Progress, Complete, Planned):', 'In Progress');
        if (status !== null) {
          // Save update to localStorage for status.html to read
          const updates = JSON.parse(localStorage.getItem('inex-project-updates') || '[]');
          updates.push({ date, update, status });
          localStorage.setItem('inex-project-updates', JSON.stringify(updates));
          
          // Trigger storage event for real-time updates
          window.dispatchEvent(new StorageEvent('storage', {
            key: 'inex-project-updates',
            newValue: JSON.stringify(updates)
          }));
          
          alert('Update added successfully!');
        }
      }
    }
  }

  // Live Deployment Functions
  async function deployStatusUpdate() {
    const progressElement = document.getElementById('progressDisplay');
    const phaseElement = document.getElementById('phaseDisplay');
    const statusElement = document.getElementById('statusText');
    
    // Check if elements exist (only available in status view)
    if (!progressElement || !phaseElement || !statusElement) {
      alert('‚ö†Ô∏è Please navigate to the Status Management section first to use this feature.');
      return;
    }
    
    const progress = progressElement.textContent.replace('%', '');
    const phase = phaseElement.textContent;
    const status = statusElement.textContent;
    
    try {
      console.log('Deploying status update:', { progress, phase, status });
      
      const response = await fetch('/api/status-update', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          progress: parseInt(progress),
          phase,
          status
        })
      });

      console.log('Response status:', response.status);
      
      if (!response.ok) {
        const errorText = await response.text();
        console.error('API Error Response:', errorText);
        
        let errorMessage = 'Deployment failed';
        try {
          const errorJson = JSON.parse(errorText);
          errorMessage = errorJson.error || errorMessage;
        } catch (e) {
          errorMessage = `HTTP ${response.status}: ${errorText.substring(0, 100)}`;
        }
        
        alert('‚ùå ' + errorMessage);
        return;
      }

      const result = await response.json();
      console.log('API Success Response:', result);
      
      if (result.success) {
        alert('üöÄ Status update deployed successfully! Zebediah will see the changes in a few minutes.');
      } else {
        alert('‚ùå Deployment failed: ' + (result.error || 'Unknown error'));
      }
    } catch (error) {
      console.error('Deployment error:', error);
      alert('‚ùå Deployment error: ' + error.message);
    }
  }

  async function deployPhaseChange() {
    const progressElement = document.getElementById('progressDisplay');
    const phaseElement = document.getElementById('phaseDisplay');
    
    // Check if elements exist (only available in status view)
    if (!progressElement || !phaseElement) {
      alert('‚ö†Ô∏è Please navigate to the Status Management section first to use this feature.');
      return;
    }
    
    const progress = progressElement.textContent.replace('%', '');
    const phase = phaseElement.textContent;
    const status = `Phase transition to ${phase} - ${progress}% complete`;
    
    try {
      console.log('Deploying phase change:', { progress, phase, status });
      
      const response = await fetch('/api/status-update', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          progress: parseInt(progress),
          phase,
          status
        })
      });

      console.log('Response status:', response.status);
      
      if (!response.ok) {
        const errorText = await response.text();
        console.error('API Error Response:', errorText);
        
        let errorMessage = 'Deployment failed';
        try {
          const errorJson = JSON.parse(errorText);
          errorMessage = errorJson.error || errorMessage;
        } catch (e) {
          errorMessage = `HTTP ${response.status}: ${errorText.substring(0, 100)}`;
        }
        
        alert('‚ùå ' + errorMessage);
        return;
      }

      const result = await response.json();
      console.log('API Success Response:', result);
      
      if (result.success) {
        alert('üîÑ Phase change deployed successfully! Zebediah will see the new phase in a few minutes.');
      } else {
        alert('‚ùå Deployment failed: ' + (result.error || 'Unknown error'));
      }
    } catch (error) {
      console.error('Deployment error:', error);
      alert('‚ùå Deployment error: ' + error.message);
    }
  }

</script>
</body>
</html>