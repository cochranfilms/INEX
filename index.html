<!doctype html>
<html lang="en" data-theme="light">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>INEX Systems Portal ‚Äî Management Dashboard</title>
        <meta name="description" content="INEX Systems & Designs ‚Äî Internal management dashboard for Phase 1: Prototype Polish phase. Project management and status updates." />
<link rel="icon" type="image/svg+xml" href="vite.svg" />
<link rel="alternate icon" type="image/x-icon" href="vite.ico" />
<style>
  :root{
    --inex-charcoal:#191919;
    --maroon:#A62E3F;
    --maroon-700:#7c2330;
    --ink:#111; --muted:#666; --border:#e6e6e6;
    --bg:#f5f6f8; --panel:#ffffff; --panel-ink:#222;
    --accent:#FFB200; --accent-ink:#111;
    --radius:16px; --radius-sm:12px;
    --shadow:0 3px 16px rgba(0,0,0,.08);
  }
  html[data-theme="dark"]{
    --ink:#e8ecf6; --muted:#9fa8bc; --border:rgba(255,255,255,.12);
    --bg:#08090e; --panel:rgba(18,20,28,.65); --panel-ink:#e9edf7;
    --shadow:0 20px 50px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.04);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--panel-ink);
       font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
       letter-spacing:.2px;transition:background-color .25s ease,color .25s ease;}

  /* Topbar */
  .topbar{position:sticky;top:0;z-index:80;display:flex;align-items:center;gap:.75rem;padding:.9rem 1.25rem;background:var(--inex-charcoal);color:#fff;border-bottom:3px solid #2a2a2a}
  html[data-theme="dark"] .topbar{background:linear-gradient(180deg, rgba(8,9,14,.9), rgba(8,9,14,.6));border-bottom:1px solid var(--border);backdrop-filter: blur(10px)}
  .brand{display:flex;align-items:center;gap:.75rem;font-weight:800}
  .brand img{height:36px;width:auto;filter:drop-shadow(0 2px 8px rgba(0,0,0,.35))}
  .brand small{opacity:.8;font-weight:600}
  .spacer{flex:1}
  .toggle{display:inline-flex;align-items:center;gap:.5rem;padding:.45rem .7rem;border-radius:999px;border:1px solid rgba(255,255,255,.25);color:#fff;background:rgba(255,255,255,.06);cursor:pointer;font-weight:800;font-size:12px;text-decoration:none}
  .toggle .dot{width:9px;height:9px;border-radius:50%;background:#FFB200;box-shadow:0 0 10px #ffb20088}
  .pitch-btn{display:inline-flex;align-items:center;gap:.5rem;margin-right:.5rem;padding:.45rem .7rem;border-radius:10px;border:1px solid rgba(255,255,255,.25);background:rgba(255,255,255,.06);color:#fff;text-decoration:none;font-weight:800;cursor:pointer}

  /* Layout */
  .wrap{display:grid;grid-template-columns:260px minmax(0,1fr);min-height:calc(100vh - 64px)}
  aside{background:#fafafa;border-right:1px solid var(--border);padding:1rem}
  html[data-theme="dark"] aside{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01))}
  .nav h3{margin:.25rem 0 .6rem 0;font-size:12px;text-transform:uppercase;letter-spacing:.12em;color:#888}
  html[data-theme="dark"] .nav h3{color:var(--muted)}
  .nav a{display:flex;align-items:center;gap:.6rem;padding:.6rem .7rem;border-radius:10px;color:#333;text-decoration:none;border:1px solid transparent;transition:.18s ease all}
  .nav a:hover,.nav a:focus-visible{background:#f0f0f0}
  .nav a.active{color:var(--maroon);background:#f8f1f2;font-weight:700;border:1px solid #f0d8dc}
  html[data-theme="dark"] .nav a{color:var(--panel-ink)}
  html[data-theme="dark"] .nav a:hover{background:rgba(255,255,255,.05);border-color:var(--border)}
  html[data-theme="dark"] .nav a.active{background:linear-gradient(180deg, rgba(166,46,63,.28), rgba(166,46,63,.18));border-color:#5c2029;color:#fff;box-shadow:0 8px 26px rgba(166,46,63,.25)}

  main{padding:1.25rem;max-width:1400px;margin-inline:auto}
  .header{display:flex;align-items:baseline;gap:1rem;flex-wrap:wrap;margin:.25rem 0 1rem 0}
  .header h1{margin:0;font-size:24px;color:var(--ink)}
  .muted{color:var(--muted)}
  .cards{display:grid;gap:1rem;grid-template-columns:repeat(12,minmax(0,1fr))}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:var(--shadow);transform:translateZ(0)}
  html[data-theme="dark"] .card{backdrop-filter: blur(10px)}
  .head{padding:.8rem 1rem;background:#f8f8f8;border-bottom:1px solid var(--border);font-weight:800}
  html[data-theme="dark"] .head{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02))}
  .body{padding:1rem}
  .list{margin:0;padding-left:1.1rem}.list li{margin:.3rem 0}
  .pill{display:inline-block;background:#f7f7f7;border:1px solid var(--border);border-radius:999px;padding:.35rem .65rem;font-size:12px}
  html[data-theme="dark"] .pill{background:rgba(255,255,255,.06);border-color:var(--border);color:var(--panel-ink)}
  .btn{display:inline-flex;align-items:center;justify-content:center;padding:.8rem 1rem;border-radius:12px;border:1px solid transparent;text-decoration:none;font-weight:800;cursor:pointer;transition:.15s transform ease}
  .btn:hover{transform:translateY(-1px);filter:brightness(.97)}
  .btn.primary{background:var(--maroon);color:#fff;border-color:var(--maroon-700)}
  .btn.secondary{background:var(--accent);color:var(--accent-ink);border-color:#e6a300}
  .btn.ghost{background:#fff;color:var(--maroon);border-color:#e9c6cc}
  html[data-theme="dark"] .btn.ghost{background:rgba(255,255,255,.06);color:#fff;border-color:var(--border)}
  .table{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:12px;overflow:hidden}
  .table th,.table td{padding:.75rem .9rem;border-bottom:1px solid var(--border);text-align:left}
  .table thead th{background:#191919;color:#FFB200;font-weight:800}
  html[data-theme="dark"] .table thead th{background:#11131a}
  .table tr:nth-child(even) td{background:#fbfbfb}
  html[data-theme="dark"] .table tr:nth-child(even) td{background:rgba(255,255,255,.03)}
  .span-4{grid-column:span 4}.span-6{grid-column:span 6}.span-8{grid-column:span 8}.span-12{grid-column:1/-1}

  .footer{color:#999;font-size:12px;text-align:center;padding:1.2rem}
  html[data-theme="dark"] .footer{color:var(--muted)}

  /* Pitch overlay */
  .overlay{position:fixed;inset:0;z-index:90;display:none;background:rgba(0,0,0,.55)}
  .overlay.show{display:block}
  .pitch{position:relative;max-width:1100px;margin:4vh auto;background:var(--panel);color:var(--panel-ink);
         border:1px solid var(--border);border-radius:18px;box-shadow:0 30px 80px rgba(0,0,0,.45);overflow:hidden;
         max-height:92vh;display:flex;flex-direction:column}
  .pitch-head{display:flex;align-items:center;gap:.9rem;padding:14px 18px;background:linear-gradient(135deg,#A62E3F,#5b1520);color:#fff}
  .pitch-scroll{padding:18px;overflow:auto}
  .pitch-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
  .p-card{background:var(--panel);border:1px solid var(--border);border-radius:14px;overflow:hidden}
  .p-card .p-head{padding:10px 14px;background:#191919;color:#FFB200;font-weight:800}
  html[data-theme="dark"] .p-card .p-head{background:#11131a}
  .p-card .p-body{padding:14px}
  .pitch-close{position:absolute;top:8px;right:8px;background:#fff;border:1px solid #eee;border-radius:10px;padding:8px 10px;font-weight:800;cursor:pointer}
  html[data-theme="dark"] .pitch-close{background:rgba(255,255,255,.08);color:#fff;border-color:var(--border)}

  @media (max-width:1000px){
    .wrap{grid-template-columns:1fr}
    .span-4,.span-6,.span-8{grid-column:1/-1}
    .pitch-grid{grid-template-columns:1fr}
  }
</style>
</head>
<body>
<header class="topbar">
  <div class="brand">
    <img src="inex-logo.png" alt="INEX Systems & Designs Logo" />
    <span>INEX Systems Portal</span>
            <small>¬∑ Management Dashboard</small>
  </div>
  <div class="spacer"></div>
  <button class="pitch-btn" id="openPitch">üìã Project Overview</button>
  <a class="toggle" id="themeToggle" href="#"><span class="dot"></span><span id="themeLabel">1.0 Light</span></a>
</header>

<div class="wrap">
  <aside>
    <nav class="nav">
      <h3>Navigation</h3>
      <a href="#/dashboard" data-route="dashboard" class="active">üè† Dashboard</a>
      <a href="#/projects"  data-route="projects">üìÅ Projects</a>
      <a href="#/planning"  data-route="planning">üìã Planning</a>
      <a href="#/status"    data-route="status">üìä Manage Status</a>
    </nav>
  </aside>

  <main id="view"></main>
</div>

<!-- Project Overview Overlay -->
<div class="overlay" id="pitchOverlay" aria-hidden="true">
  <div class="pitch" role="dialog" aria-modal="true" aria-labelledby="pitchTitle">
    <button class="pitch-close" id="closePitch">‚úï Close</button>
    <div class="pitch-head">
      <img src="inex-logo.png" alt="INEX Logo">
      <h2 id="pitchTitle" style="margin:0;font-size:18px;">INEX Systems Portal ‚Äî Phase 1</h2>
              <span style="opacity:.85;font-weight:700;margin-left:.5rem">Prototype Polish Phase</span>
    </div>
    <div class="pitch-scroll">
      <div class="pitch-grid">
        <div class="p-card">
          <div class="p-head">Phase 1: Prototype Polish</div>
          <div class="p-body">
            <h4 style="margin:.2rem 0 .5rem 0">üéØ Current Focus</h4>
            <ul class="list">
              <li><strong>Working Prototype:</strong> INEX branding integration and basic UI framework</li>
              <li><strong>UI Framework:</strong> Dark/Light theme implementation with INEX colors</li>
              <li><strong>Core Structure:</strong> Dashboard layout and navigation framework</li>
              <li><strong>Documentation:</strong> Project specs and deployment preparation</li>
            </ul>
            <h4 style="margin:1rem 0 .5rem 0">üìã Next Steps</h4>
            <ul class="list">
              <li>Complete INEX branding integration</li>
              <li>Finalize basic UI framework and themes</li>
              <li>Prepare core dashboard structure</li>
              <li>Complete Phase 1 documentation</li>
            </ul>
          </div>
        </div>
        <div class="p-card">
          <div class="p-head">Project Overview</div>
          <div class="p-body">
            <h4 style="margin:.2rem 0 .5rem 0">üèóÔ∏è What We're Building</h4>
            <ul class="list">
              <li><strong>INEX Operations Portal:</strong> Centralized dashboard for INEX team operations</li>
              <li><strong>Project Management:</strong> Tools for tracking installations and client projects</li>
              <li><strong>Inventory System:</strong> Management of ClickShare units and equipment</li>
              <li><strong>Client Portal:</strong> Interface for client access and support</li>
            </ul>
            <div style="margin-top:8px;padding:8px;background:rgba(255,178,0,.1);border:1px solid rgba(255,178,0,.2);border-radius:8px;font-size:12px">
              <strong>üìÖ Timeline:</strong> 4-5 weeks total ‚Ä¢ <strong>üí∞ Investment:</strong> $4,500 + $150/month care plan
            </div>
            <div style="margin-top:8px;padding:8px;background:rgba(166,46,63,.1);border:1px solid rgba(166,46,63,.2);border-radius:8px;font-size:12px">
              <strong>üîÑ Development Phases:</strong><br>
              ‚Ä¢ Phase 1: Prototype Polish (1 week) - Current<br>
              ‚Ä¢ Phase 2: Auth + Connectors (2-3 weeks)<br>
              ‚Ä¢ Phase 3: Client Portal & Reports (1 week)
            </div>
            <div style="margin-top:8px;padding:8px;background:rgba(0,150,136,.1);border:1px solid rgba(0,150,136,.2);border-radius:8px;font-size:12px">
              <strong>üìÖ Updated Timeline:</strong><br>
              ‚Ä¢ Phase 1: Aug 15-22 (Design & Setup)<br>
              ‚Ä¢ Phase 2: Aug 22 - Sep 11 (Development & Testing)<br>
              ‚Ä¢ Phase 3: Sep 11-18 (Deployment & Training)
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px">
              <a class="btn secondary" href="status.html" target="_blank">üìä View Status</a>
              <a class="btn ghost" href="#/dashboard">Back to Dashboard</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <script>
  /* Views: Phase 1 - Prototype Polish Focus */
  const Views = {
    dashboard: `
      <div class="header"><h1>Welcome to INEX Systems Portal</h1><span class="muted">Phase 1: Prototype Polish ‚Äî INEX-branded operations portal development</span></div>
      <section class="cards">
        <article class="card span-6">
          <div class="head">Current Phase: Prototype Polish</div>
          <div class="body">
            <div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem">
              <div style="width:80px;height:80px;border-radius:50%;background:conic-gradient(#A62E3F var(--progress,5%), #e6e6e6 0);display:grid;place-items:center;border:3px solid #f0f0f0" id="dashboardProgressRing">
                <strong style="font-size:16px" id="dashboardProgressText">5%</strong>
              </div>
              <div>
                <strong>Project Status: Phase 1 - Prototype Polish</strong><br>
                <small class="muted">INEX branding integration and basic UI framework in progress</small>
              </div>
            </div>
            <div style="background:#f8f8f8;border-radius:8px;padding:.8rem;border:1px solid var(--border)">
              <strong>Focus:</strong> Working prototype with INEX branding, basic UI framework (Dark/Light themes), core dashboard structure, and project documentation.
            </div>
            <div style="margin-top:1rem;padding:.8rem;background:rgba(166,46,63,.1);border:1px solid rgba(166,46,63,.2);border-radius:8px">
              <strong>üí° Management Note:</strong> This is your internal dashboard. Use the Status Management section to update progress that Zebediah will see on the public status page.
            </div>
          </div>
        </article>
        <article class="card span-6">
          <div class="head">Quick Actions</div>
          <div class="body">
            <div style="display:grid;gap:.6rem">
              <a class="btn primary" href="#/projects">View Project Timeline</a>
              <a class="btn secondary" href="#/planning">Technical Specs</a>
              <a class="btn primary" href="#/status">Manage Status</a>
              <a class="btn secondary" href="status.html" target="_blank">Client Status Page</a>
            </div>
          </div>
        </article>
        <article class="card span-8">
          <div class="head">Project Timeline Overview</div>
          <div class="body">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
              <div style="border:1px solid var(--border);border-radius:12px;padding:1rem">
                <span class="pill">Phase 1 (Current)</span>
                <ul class="list" style="margin-top:.5rem">
                  <li>Prototype Polish: 1-2 weeks</li>
                  <li>INEX branding integration</li>
                  <li>Basic UI framework</li>
                  <li>ETA: Aug 15-22</li>
                </ul>
              </div>
              <div style="border:1px solid var(--border);border-radius:12px;padding:1rem">
                <span class="pill">Phase 2 & 3</span>
                <ul class="list" style="margin-top:.5rem">
                  <li>Auth + Connectors: 2-4 weeks</li>
                  <li>Client Portal: 2-3 weeks</li>
                  <li>Total: 4-5 weeks</li>
                  <li>Full ETA: Mar 5-19</li>
                </ul>
              </div>
            </div>
          </div>
        </article>
        <article class="card span-4">
          <div class="head">Project Info</div>
          <div class="body">
            <ul class="list">
              <li><strong>Client:</strong> INEX Systems & Designs</li>
              <li><strong>Phase:</strong> 1 - Prototype Polish</li>
              <li><strong>Progress:</strong> 5%</li>
              <li><strong>ETA:</strong> Sep 11-18, 2025</li>
            </ul>
          </div>
        </article>
      </section>
      <p class="footer">INEX Systems Portal ‚Ä¢ Phase 1: Prototype Polish ‚Ä¢ ¬© Cochran Full Stack Solutions</p>
    `,
    projects: `
      <div class="header"><h1>Project Planning</h1><span class="muted">Prototype Polish phase planning and development</span></div>
      <div class="cards">
        <article class="card span-8">
          <div class="head">Project Timeline</div>
          <div class="body">
            <table class="table">
              <thead><tr><th>Phase</th><th>Duration</th><th>Status</th><th>Deliverables</th><th>ETA</th></tr></thead>
              <tbody>
                <tr><td><strong>Phase 1:</strong> Prototype Polish</td><td>1 week</td><td><span class="pill">In Progress</span></td><td>Working prototype, basic UI</td><td>Aug 15-22</td></tr>
                <tr><td><strong>Phase 2:</strong> Auth + Connectors</td><td>2-3 weeks</td><td><span class="pill">Planned</span></td><td>Authentication, data integration</td><td>Aug 22 - Sep 11</td></tr>
                <tr><td><strong>Phase 3:</strong> Client Portal & Reports</td><td>1 week</td><td><span class="pill">Planned</span></td><td>Full deployment, training</td><td>Sep 11-18</td></tr>
              </tbody>
            </table>
            <div style="margin-top:1rem;padding:.8rem;background:rgba(166,46,63,.1);border:1px solid rgba(166,46,63,.2);border-radius:8px">
              <strong>üìÖ Total Timeline:</strong> 4-5 weeks from signed agreement ‚Ä¢ <strong>üí∞ Investment:</strong> $4,500 + $150/month care plan
            </div>
          </div>
        </article>
        <article class="card span-4">
          <div class="head">Phase 1 Deliverables</div>
          <div class="body">
            <ul class="list">
              <li>Working prototype with INEX branding</li>
              <li>Basic UI framework (Dark/Light themes)</li>
              <li>Core dashboard structure</li>
              <li>Project documentation</li>
              <li>Deployment preparation</li>
            </ul>
          </div>
        </article>
      </div>
    `,
    planning: `
      <div class="header"><h1>Planning Documents</h1><span class="muted">Project planning and technical specifications</span></div>
      <div class="cards">
        <article class="card span-6">
          <div class="head">Technical Architecture</div>
          <div class="body">
            <h4>Portal Structure:</h4>
            <ul class="list">
              <li><strong>Dashboard:</strong> Operations overview and KPIs</li>
              <li><strong>Projects:</strong> Job management and tracking</li>
              <li><strong>Jobs/Dispatch:</strong> Assignment and workflow</li>
              <li><strong>Inventory:</strong> ClickShare units and parts</li>
              <li><strong>RMA/Warranties:</strong> Service tracking</li>
              <li><strong>SLAs/Reports:</strong> Performance metrics</li>
              <li><strong>Knowledge:</strong> Documentation hub</li>
              <li><strong>Clients:</strong> Client management</li>
              <li><strong>Careers:</strong> Job listings</li>
              <li><strong>Settings:</strong> System configuration</li>
            </ul>
            <div style="margin-top:1rem">
              <a class="btn primary" href="#">View Technical Specs</a>
            </div>
          </div>
        </article>
        <article class="card span-6">
          <div class="head">Implementation Plan</div>
          <div class="body">
            <h4>Development Phases:</h4>
            <ul class="list">
              <li><strong>Phase 1 (1-2 weeks):</strong> Prototype polish and basic UI</li>
              <li><strong>Phase 2 (2-4 weeks):</strong> Authentication and data connectors</li>
              <li><strong>Phase 3 (2-3 weeks):</strong> Client portal and reporting</li>
            </ul>
            <div style="margin-top:1rem">
              <a class="btn secondary" href="#">Project Roadmap</a>
            </div>
          </div>
        </article>
      </div>
    `,
    status: `
      <div class="header"><h1>Status Management</h1><span class="muted">Update project status and progress for client visibility</span></div>
      <div class="cards">
        <article class="card span-8">
          <div class="head">Current Status Overview</div>
          <div class="body">
            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:1rem">
              <div style="text-align:center;padding:1rem;border:1px solid var(--border);border-radius:12px">
                <div style="font-size:24px;font-weight:900;color:var(--maroon)" id="progressDisplay">5%</div>
                <div style="font-size:12px;color:var(--muted)">Overall Progress</div>
              </div>
              <div style="text-align:center;padding:1rem;border:1px solid var(--border);border-radius:12px">
                <div style="font-size:24px;font-weight:900;color:var(--accent)" id="tasksDisplay">1/3</div>
                <div style="font-size:12px;color:var(--muted)">Phases Complete</div>
              </div>
              <div style="text-align:center;padding:1rem;border:1px solid var(--border);border-radius:12px">
                <div style="font-size:24px;font-weight:900;color:var(--muted)" id="phaseDisplay">Phase 1</div>
                <div style="font-size:12px;color:var(--muted)">Current Phase</div>
              </div>
              <div style="text-align:center;padding:1rem;border:1px solid var(--border);border-radius:12px">
                <div style="font-size:24px;font-weight:900;color:var(--muted)" id="etaDisplay">Aug 22</div>
                <div style="font-size:12px;color:var(--muted)">Phase 1 End</div>
              </div>
            </div>
            <div style="background:#f8f8f8;border-radius:8px;padding:1rem;border:1px solid var(--border);margin-bottom:1rem">
              <strong>Current Status:</strong> <span id="statusText">Phase 1 (Prototype Polish) in progress. Working on INEX branding integration and basic UI framework. On track for Aug 22 completion.</span>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
              <button class="btn primary" onclick="updateStatus()">Update Status</button>
              <a class="btn secondary" href="status.html" target="_blank">View Public Status</a>
            </div>
            <div style="margin-top:1rem;padding:1rem;background:rgba(0,150,136,.1);border:1px solid rgba(0,150,136,.2);border-radius:8px">
              <strong>üöÄ Live Deployment Controls</strong><br>
              <small>These buttons will update both local status AND deploy live to Zebediah's status page:</small>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:1rem">
                <button class="btn primary" onclick="deployStatusUpdate()">üöÄ Deploy Status Update</button>
                <button class="btn secondary" onclick="deployPhaseChange()">üîÑ Deploy Phase Change</button>
                <button class="btn ghost" onclick="testGitHubWorkflow()">üß™ Test Workflow</button>
              </div>
            </div>
            <div style="margin-top:1rem;padding:1rem;background:rgba(255,178,0,.1);border:1px solid rgba(255,178,0,.2);border-radius:8px">
              <strong>üîÑ Manual Sync</strong><br>
              <small>Use this button to manually sync data between the dashboard and status page:</small>
              <div style="margin-top:1rem">
                <button class="btn secondary" onclick="syncWithStatusPage()">üîÑ Sync Status Page</button>
              </div>
            </div>
          </div>
        </article>
        <article class="card span-4">
          <div class="head">Quick Actions</div>
          <div class="body">
            <div style="display:grid;gap:.6rem">
              <button class="btn secondary" onclick="incrementProgress()">+10% Progress</button>
              <button class="btn secondary" onclick="nextPhase()">Next Phase</button>
              <button class="btn secondary" onclick="addUpdate()">Add Update</button>
            </div>
          </div>
        </article>
      </section>

      <!-- Communication Section -->
      <section class="cards" style="margin-top:1rem">
        <article class="card span-8">
          <div class="head">üí¨ Client Messages</div>
          <div class="body">
            <div style="margin-bottom:1rem">
              <p style="margin:0 0 12px 0;font-size:13px;color:var(--muted)">
                Messages from Zebediah (INEX) will appear here. You can respond by adding updates to the status.
              </p>
            </div>
            
            <div id="devMessagesList" style="max-height:400px;overflow-y:auto;border:1px solid var(--border);border-radius:8px;padding:1rem;background:#f8f8f8">
              <div style="text-align:center;padding:20px;color:var(--muted);font-size:13px">
                No messages from client yet. Messages will appear here when Zebediah sends them.
              </div>
            </div>
            
            <div style="margin-top:1rem;padding:1rem;background:rgba(0,150,136,.1);border:1px solid rgba(0,150,136,.2);border-radius:8px">
              <strong>üí° How to respond:</strong><br>
              <small>When you receive a message, use the "Add Update" button above to respond with project updates, or use the "Update Status" button to modify the current status.</small>
            </div>
          </div>
        </article>

        <article class="card span-4">
          <div class="head">Message Actions</div>
          <div class="body">
            <div style="display:grid;gap:.6rem">
              <button class="btn secondary" onclick="markMessageRead()">Mark as Read</button>
              <button class="btn secondary" onclick="clearMessages()">Clear All</button>
              <button class="btn primary" onclick="refreshMessages()">üîÑ Refresh</button>
            </div>
            <div style="margin-top:1rem;padding:.8rem;background:rgba(166,46,63,.1);border:1px solid rgba(166,46,63,.2);border-radius:8px;font-size:12px">
              <strong>üì± Real-time:</strong> Messages update automatically when Zebediah sends them from the status page.
            </div>
          </div>
        </article>
      </section>
    `
  };

  const view = document.getElementById('view');
  const links = Array.from(document.querySelectorAll('.nav a'));
  function setActive(route){ links.forEach(a => a.classList.toggle('active', a.dataset.route === route)); }

  function render(){
    const route = location.hash.replace('#/','') || 'dashboard';
    setActive(route);
    view.innerHTML = Views[route] || Views.dashboard;
    // After rendering, if we're on the status view, try to sync from live JSON
    if (route === 'status') {
      loadLiveStatusFromJson();
    }
  }
  window.addEventListener('hashchange', render);
  window.addEventListener('load', render);
  
  // Load saved status data when dashboard loads
  window.addEventListener('load', function() {
    // Wait a bit for the DOM to be fully ready
    setTimeout(() => {
      // Load from live JSON first, then fallback to localStorage
      loadLiveStatusFromJson().then(() => {
        const savedProgress = localStorage.getItem('inex-project-progress') || '5';
        const savedPhase = localStorage.getItem('inex-project-phase') || 'Phase 1';
        const savedStatus = localStorage.getItem('inex-project-status') || 'Phase 1 (Prototype Polish) in progress. Working on INEX branding integration and basic UI framework. On track for Aug 22 completion.';
        
        // Update all progress displays to ensure consistency
        updateDashboardProgress();
        
        // Only update if elements exist (they only exist in the status view)
        const phaseElement = document.getElementById('phaseDisplay');
        const statusElement = document.getElementById('statusText');
        
        if (phaseElement) {
          phaseElement.textContent = savedPhase;
        }
        if (statusElement) {
          statusElement.textContent = savedStatus;
        }
      });
      
      // Initialize default values if none exist
      if (!localStorage.getItem('inex-project-progress')) {
        localStorage.setItem('inex-project-progress', '5');
      }
      if (!localStorage.getItem('inex-project-phase')) {
        localStorage.setItem('inex-project-phase', 'Phase 1');
      }
      if (!localStorage.getItem('inex-project-status')) {
        localStorage.setItem('inex-project-status', 'Phase 1 (Prototype Polish) in progress. Working on INEX branding integration and basic UI framework. On track for Aug 22 completion.');
      }
    }, 100);
  });

  /* Theme toggle + persistence */
  const root = document.documentElement;
  const btn = document.getElementById('themeToggle');
  const label = document.getElementById('themeLabel');
  const saved = localStorage.getItem('inex-theme');
  if(saved){ root.setAttribute('data-theme', saved); label.textContent = saved === 'dark' ? '1.0 Light' : '2.0 Dark'; }
  btn.addEventListener('click', (e)=>{
    e.preventDefault();
    const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', next);
    localStorage.setItem('inex-theme', next);
    label.textContent = next === 'dark' ? '1.0 Light' : '2.0 Dark';
  });

  /* Project overview overlay controls */
  const overlay = document.getElementById('pitchOverlay');
  const openPitch = document.getElementById('openPitch');
  const closePitch = document.getElementById('closePitch');
  function openOverlay(){ overlay.classList.add('show'); overlay.setAttribute('aria-hidden','false'); }
  function closeOverlay(){ overlay.classList.remove('show'); overlay.setAttribute('aria-hidden','true'); }
  openPitch.addEventListener('click', openOverlay);
  closePitch.addEventListener('click', closeOverlay);
  overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeOverlay(); });
  window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && overlay.classList.contains('show')) closeOverlay(); });

  // Determine API base for both messages and status updates
  const isDev = window.location.hostname === 'localhost' || 
                window.location.hostname === '127.0.0.1' ||
                window.location.port !== '';
  
  // For GitHub Pages deployment, we'll use GitHub Actions workflows instead of API endpoints
  let API_BASE = isDev ? 'http://localhost:3000' : window.location.origin;
  let API_STATUS_UPDATE = `${API_BASE}/api/status-update`;
  let API_MESSAGES = `${API_BASE}/api/messages`;

  // GitHub Actions workflow URLs for GitHub Pages deployment
  const GITHUB_WORKFLOW_URLS = {
    statusUpdate: 'https://api.github.com/repos/cochranfilms/INEX/actions/workflows/status-update.yml/dispatches',
    messages: 'https://api.github.com/repos/cochranfilms/INEX/actions/workflows/messages.yml/dispatches'
  };

  // Debug logging
  console.log('üîç API Configuration Debug:');
  console.log('  Hostname:', window.location.hostname);
  console.log('  Port:', window.location.port);
  console.log('  Origin:', window.location.origin);
  console.log('  isDev:', isDev);
  console.log('  API_BASE:', API_BASE);
  console.log('  API_STATUS_UPDATE:', API_STATUS_UPDATE);
  console.log('  API_MESSAGES:', API_MESSAGES);

  const candidateBases = isDev ? [API_BASE] : [
    window.location.origin,
    window.location.origin.replace('://inex.', '://www.inex.'),
    window.location.origin.replace('://www.inex.', '://inex.'),
  ].filter((v, i, a) => v && a.indexOf(v) === i);

  async function detectApiBaseForStatus() {
    if (isDev) return;
    for (const base of candidateBases) {
      try {
        // Probe with a safe HEAD/GET to messages endpoint, which exists everywhere
        const resp = await fetch(`${base}/api/messages`, { method: 'GET', cache: 'no-store' });
        if (resp.ok) {
          API_BASE = base;
          API_STATUS_UPDATE = `${API_BASE}/api/status-update`;
          console.log('Selected API Base (index):', API_BASE);
          return;
        }
      } catch (_) {}
    }
  }

  // Status Management Functions
  // Load live status from JSON so the status view reflects deploy-time updates
  async function loadLiveStatusFromJson() {
    try {
      const response = await fetch('/inex-live-data.json', { cache: 'no-store' });
      if (!response.ok) return;
      const data = await response.json();
      const progress = typeof data.progress === 'number' ? data.progress : parseInt((data?.current?.progress ?? '0'), 10) || 0;
      const phase = data.phase || data?.currentPhase || null;
      const status = data.status || data?.current?.status || null;
      
      // Update localStorage with live data
      if (!isNaN(progress)) {
        localStorage.setItem('inex-project-progress', String(progress));
      }
      if (phase) {
        localStorage.setItem('inex-project-phase', phase);
      }
      if (status) {
        localStorage.setItem('inex-project-status', status);
      }
      
      // Update UI elements if they exist
      const progressEl = document.getElementById('progressDisplay');
      const phaseEl = document.getElementById('phaseDisplay');
      const statusEl = document.getElementById('statusText');
      
      if (progressEl && !isNaN(progress)) {
        progressEl.textContent = `${progress}%`;
      }
      if (phaseEl && phase) {
        phaseEl.textContent = phase;
      }
      if (statusEl && status) {
        statusEl.textContent = status;
      }
      
      return true;
    } catch (error) {
      console.log('Could not load live status, using localStorage defaults');
      return false;
    }
  }
  function updateStatus() {
    const newProgress = prompt('Enter new progress percentage (0-100):', '5');
    if (newProgress !== null && !isNaN(newProgress)) {
      const progress = Math.max(0, Math.min(100, parseInt(newProgress)));
      document.getElementById('progressDisplay').textContent = progress + '%';
      
      // Save to localStorage for status.html to read
      localStorage.setItem('inex-project-progress', progress);
      
      // Update status text
      const newStatus = prompt('Enter new status description:', document.getElementById('statusText').textContent);
      if (newStatus !== null) {
        document.getElementById('statusText').textContent = newStatus;
        localStorage.setItem('inex-project-status', newStatus);
      }
      
      // Trigger storage event for real-time updates
      window.dispatchEvent(new StorageEvent('storage', {
        key: 'inex-project-progress',
        newValue: progress.toString()
      }));
    }
  }

  function incrementProgress() {
    const current = parseInt(document.getElementById('progressDisplay').textContent);
    const newProgress = Math.min(100, current + 10);
    document.getElementById('progressDisplay').textContent = newProgress + '%';
    localStorage.setItem('inex-project-progress', newProgress);
    
    // Trigger storage event for real-time updates
    window.dispatchEvent(new StorageEvent('storage', {
      key: 'inex-project-progress',
      newValue: newProgress.toString()
    }));
  }

  function nextPhase() {
    const phases = ['Phase 1', 'Phase 2', 'Phase 3'];
    const phaseNames = ['Prototype Polish', 'Auth + Connectors', 'Client Portal & Reports'];
    const currentPhase = document.getElementById('phaseDisplay').textContent;
    const currentIndex = phases.indexOf(currentPhase);
    if (currentIndex < phases.length - 1) {
      const nextPhase = phases[currentIndex + 1];
      const nextPhaseName = phaseNames[currentIndex + 1];
      document.getElementById('phaseDisplay').textContent = nextPhase;
      localStorage.setItem('inex-project-phase', nextPhase);
      localStorage.setItem('inex-project-phase-name', nextPhaseName);
      
      // Trigger storage event for real-time updates
      window.dispatchEvent(new StorageEvent('storage', {
        key: 'inex-project-phase',
        newValue: nextPhase
      }));
    }
  }

  function addUpdate() {
    const date = prompt('Enter date (e.g., Dec 18):', 'Dec 18');
    if (date !== null) {
      const update = prompt('Enter update description:', '');
      if (update !== null) {
        const status = prompt('Enter status (e.g., In Progress, Complete, Planned):', 'In Progress');
        if (status !== null) {
          // Save update to localStorage for status.html to read
          const updates = JSON.parse(localStorage.getItem('inex-project-updates') || '[]');
          updates.push({ date, update, status });
          localStorage.setItem('inex-project-updates', JSON.stringify(updates));
          
          // Trigger storage event for real-time updates
          window.dispatchEvent(new StorageEvent('storage', {
            key: 'inex-project-updates',
            newValue: JSON.stringify(updates)
          }));
          
          alert('Update added successfully!');
        }
      }
    }
  }

  // Live Deployment Functions
  async function deployStatusUpdate() {
    const progressElement = document.getElementById('progressDisplay');
    const phaseElement = document.getElementById('phaseDisplay');
    const statusElement = document.getElementById('statusText');
    
    // Check if elements exist (only available in status view)
    if (!progressElement || !phaseElement || !statusElement) {
      alert('‚ö†Ô∏è Please navigate to the Status Management section first to use this feature.');
      return;
    }
    
    const progress = progressElement.textContent.replace('%', '');
    const phase = phaseElement.textContent;
    const status = statusElement.textContent;
    
    try {
      console.log('Deploying status update:', { progress, phase, status });
      console.log('üîç Using GitHub Actions workflow for status update');
      console.log('üîç Request payload:', { progress: parseInt(progress), phase, status });
      
      // For GitHub Pages deployment, trigger GitHub Actions workflow
      if (!isDev) {
        // This would require a GitHub token and proper authentication
        // For now, we'll show instructions
        alert(`üöÄ Status Update Ready for GitHub Actions!

Progress: ${progress}%
Phase: ${phase}
Status: ${status}

To deploy this update:
1. Go to your GitHub repository: https://github.com/cochranfilms/INEX
2. Click "Actions" tab
3. Select "Status Update Workflow"
4. Click "Run workflow"
5. Fill in the details and run

The workflow will update inex-live-data.json and deploy the changes.`);
        return;
      }
      
      // Local development - use API endpoint
      let response = await fetch(API_STATUS_UPDATE, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          progress: parseInt(progress),
          phase,
          status
        })
      });
      if ((response.status === 404 || response.status === 405) && !isDev) {
        await detectApiBaseForStatus();
        response = await fetch(API_STATUS_UPDATE, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ progress: parseInt(progress), phase, status })
        });
      }

      console.log('Response status:', response.status);
      
      if (!response.ok) {
        const errorText = await response.text();
        console.error('API Error Response:', errorText);
        
        let errorMessage = 'Deployment failed';
        try {
          const errorJson = JSON.parse(errorText);
          errorMessage = errorJson.error || errorMessage;
        } catch (e) {
          errorMessage = `HTTP ${response.status}: ${errorText.substring(0, 100)}`;
        }
        
        alert('‚ùå ' + errorMessage);
        return;
      }

      const result = await response.json();
      console.log('API Success Response:', result);
      
      if (result.success) {
        alert('üöÄ Status update deployed successfully! Zebediah will see the changes in a few minutes.');
      } else {
        alert('‚ùå Deployment failed: ' + (result.error || 'Unknown error'));
      }
    } catch (error) {
      console.error('Deployment error:', error);
      alert('‚ùå Deployment error: ' + error.message);
    }
  }

  async function deployPhaseChange() {
    const progressElement = document.getElementById('progressDisplay');
    const phaseElement = document.getElementById('phaseDisplay');
    
    // Check if elements exist (only available in status view)
    if (!progressElement || !phaseElement) {
      alert('‚ö†Ô∏è Please navigate to the Status Management section first to use this feature.');
      return;
    }
    
    const progress = progressElement.textContent.replace('%', '');
    const phase = phaseElement.textContent;
    const status = `Phase transition to ${phase} - ${progress}% complete`;
    
    try {
      console.log('Deploying phase change:', { progress, phase, status });
      
      let response = await fetch(API_STATUS_UPDATE, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          progress: parseInt(progress),
          phase,
          status
        })
      });
      if ((response.status === 404 || response.status === 405) && !isDev) {
        await detectApiBaseForStatus();
        response = await fetch(API_STATUS_UPDATE, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ progress: parseInt(progress), phase, status })
        });
      }

      console.log('Response status:', response.status);
      
      if (!response.ok) {
        const errorText = await response.text();
        console.error('API Error Response:', errorText);
        
        let errorMessage = 'Deployment failed';
        try {
          const errorJson = JSON.parse(errorText);
          errorMessage = errorJson.error || errorMessage;
        } catch (e) {
          errorMessage = `HTTP ${response.status}: ${errorText.substring(0, 100)}`;
        }
        
        alert('‚ùå ' + errorMessage);
        return;
      }

      const result = await response.json();
      console.log('API Success Response:', result);
      
      if (result.success) {
        alert('üîÑ Phase change deployed successfully! Zebediah will see the new phase in a few minutes.');
      } else {
        alert('‚ùå Deployment failed: ' + (result.error || 'Unknown error'));
      }
    } catch (error) {
      console.error('Deployment error:', error);
      alert('‚ùå Deployment error: ' + error.message);
    }
  }

  // Manual Sync Function
  function syncWithStatusPage() {
    const progressElement = document.getElementById('progressDisplay');
    const phaseElement = document.getElementById('phaseDisplay');
    const statusElement = document.getElementById('statusText');

    if (!progressElement || !phaseElement || !statusElement) {
      alert('‚ö†Ô∏è Please navigate to the Status Management section first to use this feature.');
      return;
    }

    const progress = progressElement.textContent.replace('%', '');
    const phase = phaseElement.textContent;
    const status = statusElement.textContent;

    console.log('Syncing with status page:', { progress, phase, status });

    // Update localStorage
    localStorage.setItem('inex-project-progress', progress);
    localStorage.setItem('inex-project-phase', phase);
    localStorage.setItem('inex-project-status', status);

    // Trigger storage events for real-time updates
    window.dispatchEvent(new StorageEvent('storage', {
      key: 'inex-project-progress',
      newValue: progress
    }));
    
    window.dispatchEvent(new StorageEvent('storage', {
      key: 'inex-project-phase',
      newValue: phase
    }));
    
    window.dispatchEvent(new StorageEvent('storage', {
      key: 'inex-project-status',
      newValue: status
    }));

    alert('‚úÖ Status page synced successfully! The status page should update automatically.');
  }

  // Messaging System Functions
  function displayDevMessages(messages) {
    const messagesList = document.getElementById('devMessagesList');
    if (!messagesList) return; // Only available in status view
    
    if (messages.length === 0) {
      messagesList.innerHTML = `
        <div style="text-align:center;padding:20px;color:var(--muted);font-size:13px">
          No messages from client yet. Messages will appear here when Zebediah sends them.
        </div>
      `;
      return;
    }

    messagesList.innerHTML = messages.map(msg => `
      <div style="padding:12px;border:1px solid var(--border);border-radius:8px;margin-bottom:8px;background:rgba(255,255,255,.02)">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
          <strong style="font-size:13px;color:var(--maroon)">${msg.name || 'Anonymous'}</strong>
          <small style="color:var(--muted);font-size:11px">${msg.timestamp}</small>
        </div>
        <div style="font-size:13px;line-height:1.4">${msg.text}</div>
      </div>
    `).join('');
  }

  function refreshMessages() {
    // Load messages from the JSON file instead of localStorage
    fetch('/inex-messages.json', { cache: 'no-store' })
      .then(response => response.json())
      .then(messages => {
        displayDevMessages(messages);
        // Also save to localStorage for offline access
        localStorage.setItem('inex-messages', JSON.stringify(messages));
        alert(`Messages refreshed! Loaded ${messages.length} messages.`);
      })
      .catch(error => {
        console.error('Error loading messages:', error);
        // Fallback to localStorage if JSON file fails
        const savedMessages = localStorage.getItem('inex-messages') || '[]';
        const messages = JSON.parse(savedMessages);
        displayDevMessages(messages);
        alert('‚ö†Ô∏è Could not load fresh messages. Showing cached version.');
      });
  }

  function markMessageRead() {
    // This could be expanded to mark specific messages as read
    alert('Messages marked as read!');
  }

  function clearMessages() {
    if (confirm('Are you sure you want to clear all messages? This cannot be undone.')) {
      localStorage.removeItem('inex-messages');
      displayDevMessages([]);
      alert('All messages cleared!');
    }
  }

  // Listen for new messages from client
  window.addEventListener('storage', function(e) {
    if (e.key === 'inex-messages') {
      try {
        const messages = JSON.parse(e.newValue || '[]');
        displayDevMessages(messages);
        
        // Show notification for new messages
        if (messages.length > 0) {
          const latestMessage = messages[0];
          if (latestMessage.timestamp) {
            const messageTime = new Date(latestMessage.timestamp);
            const now = new Date();
            const timeDiff = now - messageTime;
            
            // Only show notification if message is less than 5 minutes old
            if (timeDiff < 300000) { // 5 minutes in milliseconds
              showMessageNotification(latestMessage);
            }
          }
        }
      } catch (e) {
        console.log('Error parsing messages');
      }
    }
  });

  // Show notification for new messages
  function showMessageNotification(message) {
    // Check if we're in the status view
    const messagesList = document.getElementById('devMessagesList');
    if (!messagesList) return;
    
    // Create notification element
    const notification = document.createElement('div');
    notification.style.cssText = `
      position: fixed;
      top: 80px;
      right: 20px;
      background: var(--maroon);
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1000;
      max-width: 300px;
      animation: slideIn 0.3s ease-out;
    `;
    
    notification.innerHTML = `
      <div style="font-weight: 700; margin-bottom: 4px;">üí¨ New Message from ${message.name || 'Client'}</div>
      <div style="font-size: 13px; opacity: 0.9;">${message.text.substring(0, 100)}${message.text.length > 100 ? '...' : ''}</div>
      <button onclick="this.parentElement.remove()" style="position: absolute; top: 8px; right: 8px; background: none; border: none; color: white; cursor: pointer; font-size: 16px;">√ó</button>
    `;
    
    // Add CSS animation
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
    `;
    document.head.appendChild(style);
    
    document.body.appendChild(notification);
    
    // Auto-remove after 8 seconds
    setTimeout(() => {
      if (notification.parentElement) {
        notification.remove();
      }
    }, 8000);
  }

  // Load messages when status view is rendered
  function loadDevMessages() {
    const messagesList = document.getElementById('devMessagesList');
    if (messagesList) {
      // Load messages from the JSON file
      fetch('/inex-messages.json', { cache: 'no-store' })
        .then(response => response.json())
        .then(messages => {
          displayDevMessages(messages);
          // Also save to localStorage for offline access
          localStorage.setItem('inex-messages', JSON.stringify(messages));
        })
        .catch(error => {
          console.error('Error loading messages:', error);
          // Fallback to localStorage if JSON file fails
          const savedMessages = localStorage.getItem('inex-messages') || '[]';
          const messages = JSON.parse(savedMessages);
          displayDevMessages(messages);
        });
    }
  }

  // Function to update dashboard progress display
  function updateDashboardProgress() {
    const progress = localStorage.getItem('inex-project-progress') || '5';
    const progressRing = document.getElementById('dashboardProgressRing');
    const progressText = document.getElementById('dashboardProgressText');
    
    if (progressRing && progressText) {
      progressRing.style.setProperty('--progress', progress + '%');
      progressText.textContent = progress + '%';
    }
    
    // Also update the status view if it's visible
    const statusProgress = document.getElementById('progressDisplay');
    if (statusProgress) {
      statusProgress.textContent = progress + '%';
    }
  }

  // Call loadDevMessages when the status view is rendered
  const originalRender = render;
  render = function() {
    originalRender();
    // Wait a bit for the DOM to be ready, then load messages and update progress
    setTimeout(() => {
      loadDevMessages();
      updateDashboardProgress();
    }, 100);
  };

  // Test GitHub Actions workflow dispatch (for development/testing)
  async function testGitHubWorkflow() {
    if (isDev) {
      alert('This function is for testing GitHub Actions workflows on the live site.');
      return;
    }
    
    const testData = {
      progress: 75,
      phase: 'Testing',
      status: 'GitHub Actions workflow test'
    };
    
    alert(`üß™ GitHub Actions Workflow Test

This will test the status update workflow with:
Progress: ${testData.progress}%
Phase: ${testData.phase}
Status: ${testData.status}

To test:
1. Go to: https://github.com/cochranfilms/INEX/actions
2. Click "Status Update Workflow"
3. Click "Run workflow"
4. Fill in the test data above
5. Click "Run workflow"

The workflow will update inex-live-data.json and deploy changes.`);
  }
</script>
</body>
</html>