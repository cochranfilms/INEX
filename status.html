<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>INEX Project Status ‚Äî Public Status Page</title>
  <meta name="description" content="INEX Systems & Designs ‚Äî Public project status and progress tracking for Phase 1: Prototype Polish phase." />
  <link rel="icon" type="image/svg+xml" href="vite.svg" />
  <link rel="alternate icon" type="image/x-icon" href="vite.ico" />
  <style>
    :root{
      --inex-charcoal:#191919;
      --maroon:#A62E3F; --maroon-700:#7c2330;
      --ink:#111; --muted:#666; --border:#e6e6e6;
      --bg:#f5f6f8; --panel:#ffffff; --panel-ink:#222;
      --accent:#FFB200; --accent-ink:#111;
      --radius:16px; --radius-sm:12px;
      --shadow:0 3px 16px rgba(0,0,0,.08);
    }
    html[data-theme="dark"]{
      --ink:#e8ecf6; --muted:#9fa8bc; --border:rgba(255,255,255,.12);
      --bg:#08090e; --panel:rgba(18,20,28,.65); --panel-ink:#e9edf7;
      --shadow:0 24px 60px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.05);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--panel-ink);
         font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
         letter-spacing:.2px}

    /* Topbar */
    .topbar{position:sticky;top:0;z-index:50;display:flex;align-items:center;gap:.8rem;padding:.9rem 1.1rem;background:var(--inex-charcoal);color:#fff;border-bottom:3px solid #2a2a2a}
    html[data-theme="dark"] .topbar{background:linear-gradient(180deg, rgba(8,9,14,.9), rgba(8,9,14,.6));border-bottom:1px solid var(--border);backdrop-filter: blur(10px)}
    .brand{display:flex;align-items:center;gap:.7rem;font-weight:900}
    .brand img{height:34px;width:auto;filter:drop-shadow(0 2px 8px rgba(0,0,0,.35))}
    .spacer{flex:1}
    .btn{display:inline-flex;align-items:center;gap:.5rem;padding:.55rem .8rem;border-radius:12px;border:1px solid transparent;text-decoration:none;font-weight:800;cursor:pointer}
    .btn.primary{background:var(--maroon);color:#fff;border-color:var(--maroon-700)}
    .btn.ghost{background:rgba(255,255,255,.06);color:#fff;border-color:rgba(255,255,255,.22)}
    .toggle{display:inline-flex;align-items:center;gap:.5rem;padding:.45rem .7rem;border-radius:999px;border:1px solid rgba(255,255,255,.25);color:#fff;background:rgba(255,255,255,.06);cursor:pointer;font-weight:800;font-size:12px}
    .toggle .dot{width:9px;height:9px;border-radius:50%;background:#FFB200;box-shadow:0 0 10px #ffb20088}

    /* Layout */
    main{padding:18px;max-width:1200px;margin-inline:auto}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid-cols-3{grid-template-columns:1.2fr 1fr 1fr}}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .head{padding:12px 14px;background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));border-bottom:1px solid var(--border);font-weight:900}
    .body{padding:14px}
    .muted{color:var(--muted)}
    .pill{display:inline-block;background:rgba(255,255,255,.06);border:1px solid var(--border);border-radius:999px;padding:.35rem .65rem;font-size:12px;color:var(--panel-ink)}
    .list{margin:0;padding-left:1.1rem}
    .list li{margin:.3rem 0}

    /* Progress Ring */
    .progress-wrap{display:grid;grid-template-columns:150px 1fr;gap:14px;align-items:center}
    .ring{width:140px;height:140px;border-radius:50%;background:
      conic-gradient(var(--accent) calc(var(--p)*1%), rgba(255,255,255,.12) 0);
      display:grid;place-items:center;border:1px solid var(--border)}
    .ring-inner{width:108px;height:108px;border-radius:50%;display:grid;place-items:center;background:rgba(0,0,0,.15);border:1px solid var(--border)}
    .ring strong{font-size:26px}

    /* Timeline */
    .timeline{position:relative}
    .steps{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}
    .step{position:relative;padding:10px;border:1px solid var(--border);border-radius:12px;background:rgba(255,255,255,.04)}
    .step .dot{position:absolute;top:-8px;left:12px;width:14px;height:14px;border-radius:50%;background:#444;border:2px solid var(--border)}
    .step.active{outline:2px solid rgba(255,178,0,.35);background:linear-gradient(180deg, rgba(166,46,63,.20), rgba(166,46,63,.08))}
    .step.active .dot{background:var(--accent);box-shadow:0 0 0 6px rgba(255,178,0,.12)}
    .step.complete{outline:2px solid rgba(76,175,80,.35);background:linear-gradient(180deg, rgba(76,175,80,.20), rgba(76,175,80,.08))}
    .step.complete .dot{background:#4CAF50;box-shadow:0 0 0 6px rgba(76,175,80,.12)}
    .step small{display:block;color:var(--muted);margin-top:6px}
    .bar{position:absolute;left:0;right:0;top:18px;height:3px;background:rgba(255,255,255,.08)}
    .bar > span{display:block;height:100%;width:var(--bar,0%);background:linear-gradient(90deg,#A62E3F,#FFB200)}

    /* Updates table */
    table{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:12px;overflow:hidden}
    th,td{padding:.65rem .8rem;border-bottom:1px solid var(--border);text-align:left}
    thead th{background:#191919;color:#FFB200;font-weight:900}
    tbody tr:nth-child(even) td{background:rgba(255,255,255,.03)}

    /* Preview */
    .preview{border-radius:14px;border:1px solid var(--border);overflow:hidden;background:rgba(255,255,255,.02)}
    .preview iframe{width:100%;height:420px;border:0;background:#111}

    /* Status indicators */
    .status-indicator{display:inline-flex;align-items:center;gap:6px;padding:.25rem .5rem;border-radius:6px;font-size:11px;font-weight:700}
    .status-pending{background:rgba(255,193,7,.15);color:#ffc107;border:1px solid rgba(255,193,7,.3)}
    .status-progress{background:rgba(33,150,243,.15);color:#2196f3;border:1px solid rgba(33,150,243,.3)}
    .status-complete{background:rgba(76,175,80,.15);color:#4caf50;border:1px solid rgba(76,175,80,.3)}
    .status-blocked{background:rgba(244,67,54,.15);color:#f44336;border:1px solid rgba(244,67,54,.3)}

    /* Development tracker */
    .dev-tracker{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:12px;padding:14px;margin-top:16px}
    .dev-tracker h4{margin:0 0 12px 0;color:var(--accent);font-size:14px}
    .dev-item{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.06)}
    .dev-item:last-child{border-bottom:none}
    .dev-checkbox{width:16px;height:16px;accent-color:var(--accent)}
    .dev-label{flex:1;font-size:13px}
    .dev-status{font-size:11px;opacity:.8}

    /* Success notification */
    .success{color:#22c55e}
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="inex-logo.png" alt="INEX Systems & Designs" />
      <span>INEX Project Status</span>
      <small style="opacity:.85;font-weight:700">¬∑ Public Status Page</small>
    </div>
    <div class="spacer"></div>

    <a id="themeToggle" class="toggle" href="#"><span class="dot"></span><span id="themeLabel">1.0 Light</span></a>
  </header>

  <main>
    <!-- Client Notice -->
    <div style="text-align:center;margin-bottom:20px;padding:1rem;background:linear-gradient(135deg, rgba(166,46,63,.1), rgba(255,178,0,.1));border:1px solid rgba(166,46,63,.2);border-radius:12px;max-width:800px;margin-left:auto;margin-right:auto">
      <strong>üéØ Welcome to INEX Project Status</strong><br>
      <small>This page shows the current progress of your INEX-branded operations portal development. Updates are posted weekly by the development team.</small>
    </div>

    <section class="grid grid-cols-3">
      <!-- Overview / Progress -->
      <article class="card">
        <div class="head">Overview</div>
        <div class="body">
          <div class="progress-wrap">
            <div class="ring" style="--p:5"><div class="ring-inner"><strong id="pct">5%</strong></div></div>
            <div>
              <div style="font-weight:900;font-size:18px">Current Phase: <span id="phaseLabel">Phase 1</span></div>
              <div class="muted" id="eta">ETA: Sep 11-18, 2025 ¬∑ Weekly updates posted below</div>
              <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
                <span class="pill" id="badgeScope">Scope v1.0</span>
                <span class="pill" id="badgeOwner">Owner: Cochran Full Stack Solutions</span>
                <span class="pill" id="badgeClient">Client: INEX</span>
              </div>
            </div>
          </div>
        </div>
      </article>

      <!-- Milestones -->
      <article class="card">
        <div class="head">Milestones</div>
        <div class="body">
          <ul class="list">
            <li>Phase 1: Prototype Polish ‚Äî <strong>In Progress</strong> ‚è≥</li>
            <li>Phase 2: Auth + Connectors ‚Äî <strong>Planned</strong> üìÖ</li>
            <li>Phase 3: Client Portal & Reports ‚Äî <strong>Planned</strong> üìÖ</li>
            <li>Full Deployment ‚Äî <strong>Planned</strong> üìÖ</li>
          </ul>
        </div>
      </article>

      <!-- Next actions -->
      <article class="card">
        <div class="head">Next Actions</div>
        <div class="body">
          <ul class="list" id="nextActions">
            <li>Complete INEX branding integration</li>
            <li>Finalize basic UI framework and themes</li>
            <li>Prepare core dashboard structure</li>
          </ul>
        </div>
      </article>
    </section>

    <!-- Timeline -->
    <section class="card" style="margin-top:16px">
      <div class="head">Project Timeline</div>
      <div class="body timeline">
        <div class="bar"><span id="barFill" style="--bar:5%"></span></div>
        <div class="steps" id="steps">
          <div class="step active" data-phase="Phase 1"><span class="dot"></span><strong>Phase 1</strong><small>Prototype Polish</small></div>
          <div class="step" data-phase="Phase 2"><span class="dot"></span><strong>Phase 2</strong><small>Auth + Connectors</small></div>
          <div class="step" data-phase="Phase 3"><span class="dot"></span><strong>Phase 3</strong><small>Client Portal</small></div>
        </div>
      </div>
    </section>

    <!-- Development Tracker -->
    <section class="card" style="margin-top:16px">
      <div class="head">Development Tracker</div>
      <div class="body">
        <div class="dev-tracker">
          <h4>üîÑ Phase 1: Prototype Polish Items</h4>
          <div id="devItems">
            <div class="dev-item">
              <input type="checkbox" class="dev-checkbox" id="dev1" data-task="inex-branding">
              <label for="dev1" class="dev-label">INEX branding integration and color tokens</label>
              <span class="dev-status status-progress">In Progress</span>
            </div>
            <div class="dev-item">
              <input type="checkbox" class="dev-checkbox" id="dev2" data-task="ui-framework">
              <label for="dev2" class="dev-label">Basic UI framework (Dark/Light themes)</label>
              <span class="dev-status status-pending">Pending</span>
            </div>
            <div class="dev-item">
              <input type="checkbox" class="dev-checkbox" id="dev3" data-task="dashboard-structure">
              <label for="dev3" class="dev-label">Core dashboard structure and navigation</label>
              <span class="dev-status status-pending">Pending</span>
            </div>
            <div class="dev-item">
              <input type="checkbox" class="dev-checkbox" id="dev4" data-task="project-docs">
              <label for="dev4" class="dev-label">Project documentation and specs</label>
              <span class="dev-status status-pending">Pending</span>
            </div>
            <div class="dev-item">
              <input type="checkbox" class="dev-checkbox" id="dev5" data-task="deployment-prep">
              <label for="dev5" class="dev-label">Deployment preparation and testing</label>
              <span class="dev-status status-pending">Pending</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Updates -->
    <section class="grid" style="margin-top:16px">
      <article class="card">
        <div class="head">Weekly Updates</div>
        <div class="body">
          <table>
            <thead><tr><th>Date</th><th>Update</th><th>Status</th></tr></thead>
            <tbody id="updates">
              <tr><td>Jan 8</td><td>Phase 1 initiated - INEX branding integration started</td><td><span class="pill">In Progress</span></td></tr>
              <tr><td>Jan 9</td><td>Basic UI framework development</td><td><span class="pill">In Progress</span></td></tr>
              <tr><td>Jan 10</td><td>Dashboard structure planning</td><td><span class="pill">Planned</span></tr>
            </tbody>
          </table>
        </div>
      </article>

      <!-- Communication Section -->
      <article class="card">
        <div class="head">üí¨ Message Developer</div>
        <div class="body">
          <div style="margin-bottom:16px">
            <p style="margin:0 0 12px 0;font-size:13px;color:var(--muted)">
              Send a message to the development team. Your message will be visible to both you and the developers.
            </p>
            <form id="messageForm" style="display:grid;gap:12px">
              <input type="text" id="messageName" placeholder="Your name (optional)" style="padding:8px 12px;border:1px solid var(--border);border-radius:8px;background:var(--panel);color:var(--panel-ink);font-size:13px">
              <textarea id="messageText" placeholder="Type your message here..." rows="3" style="padding:8px 12px;border:1px solid var(--border);border-radius:8px;background:var(--panel);color:var(--panel-ink);font-size:13px;resize:vertical"></textarea>
              <div style="display:flex;justify-content:space-between;align-items:center">
                <small style="color:var(--muted);font-size:11px" id="charCount">0 characters</small>
                <button type="submit" class="btn primary" style="justify-self:end;padding:8px 16px;font-size:13px">üì§ Send Message</button>
              </div>
            </form>
          </div>
          
          <div style="border-top:1px solid var(--border);padding-top:16px">
            <h4 style="margin:0 0 12px 0;font-size:14px;color:var(--accent)">üì® Recent Messages</h4>
            <div id="messagesList" style="max-height:300px;overflow-y:auto">
              <div style="text-align:center;padding:20px;color:var(--muted);font-size:13px">
                No messages yet. Send the first one!
              </div>
            </div>
          </div>
        </div>
      </article>
    </section>

    <p class="muted" style="text-align:center;margin:20px 0">Shareable link ‚Ä¢ Add query params like <code>?progress=25&phase=Phase 2</code> to reflect live status.</p>
    <div style="text-align:center;margin:20px 0;padding:1rem;background:rgba(166,46,63,.1);border:1px solid rgba(166,46,63,.2);border-radius:8px;max-width:800px;margin-left:auto;margin-right:auto">
      <strong>üìã Project Scope</strong><br>
      <small>INEX-branded Operations Portal: Dashboard, Jobs/Dispatch, Inventory, RMA/Warranties, SLAs/Reports, Knowledge, Clients, Careers, Settings. Dark/Light themes with SVG charts and mock data layer.</small>
    </div>
    <div style="text-align:center;margin:20px 0;padding:1rem;background:rgba(0,150,136,.1);border:1px solid rgba(0,150,136,.2);border-radius:8px;max-width:600px;margin-left:auto;margin-right:auto">
      <strong>üîÑ Real-Time Updates</strong><br>
      <small>This page automatically updates when changes are made in the management dashboard. No refresh needed!</small>
    </div>
  </main>

  <script>
    // Project tracking data - Phase 1: Prototype Polish
    const projectData = {
      currentPhase: 'Phase 1',
      progress: 5,
      phases: [
        { name: 'Phase 1', progress: 5, status: 'active', tasks: ['inex-branding', 'ui-framework', 'dashboard-structure', 'project-docs', 'deployment-prep'] },
        { name: 'Phase 2', progress: 0, status: 'pending', tasks: ['authentication', 'data-connectors', 'integration'] },
        { name: 'Phase 3', progress: 0, status: 'pending', tasks: ['client-portal', 'reporting', 'deployment'] }
      ],
      updates: [
        { date: 'Jan 8', update: 'Phase 1 initiated - INEX branding integration started', status: 'In Progress' },
        { date: 'Jan 9', update: 'Basic UI framework development', status: 'In Progress' },
        { date: 'Jan 10', update: 'Dashboard structure planning', status: 'Planned' }
      ],
      nextActions: [
        'Complete INEX branding integration',
        'Finalize basic UI framework and themes',
        'Prepare core dashboard structure'
      ]
    };

    // Initialize localStorage with default values if none exist
    if (!localStorage.getItem('inex-project-progress')) {
      localStorage.setItem('inex-project-progress', '5');
    }
    if (!localStorage.getItem('inex-project-phase')) {
      localStorage.setItem('inex-project-phase', 'Phase 1');
    }
    if (!localStorage.getItem('inex-project-status')) {
      localStorage.setItem('inex-project-status', 'Phase 1 (Prototype Polish) in progress. Working on INEX branding integration and basic UI framework. On track for Aug 22 completion.');
    }

    // Theme persistence
    const root = document.documentElement;
    const btn = document.getElementById('themeToggle');
    const label = document.getElementById('themeLabel');
    const saved = localStorage.getItem('inex-status-theme');
    if(saved){ root.setAttribute('data-theme', saved); label.textContent = saved === 'dark' ? '1.0 Light' : '2.0 Dark'; }
    btn.addEventListener('click', (e)=>{
      e.preventDefault();
      const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', next);
      localStorage.setItem('inex-status-theme', next);
      label.textContent = next === 'dark' ? '1.0 Light' : '2.0 Dark';
    });

    // Query params: progress (0-100), phase, eta, scope, owner, client
    const params = new URLSearchParams(location.search);
    
    // Read from localStorage (updated by management dashboard) or fall back to query params
    const savedProgress = localStorage.getItem('inex-project-progress') || '5';
    const savedPhase = localStorage.getItem('inex-project-phase') || 'Phase 1';
    const savedStatusValue = localStorage.getItem('inex-project-status') || 'Phase 1 (Prototype Polish) in progress. Working on INEX branding integration and basic UI framework. On track for Aug 22 completion.';
    
    const pct = Math.max(0, Math.min(100, parseInt(params.get('progress') || savedProgress || '5', 10)));
    const phase = params.get('phase') || savedPhase || 'Phase 1';
    const eta = params.get('eta') || 'ETA: Sep 11-18, 2025 ¬∑ Weekly updates posted below';
    const scope = params.get('scope') || 'Scope v1.0';
    const owner = params.get('owner') || 'Cochran Full Stack Solutions';
    const client = params.get('client') || 'INEX';

    // Apply to UI
    document.querySelector('.ring').style.setProperty('--p', pct);
    document.getElementById('pct').textContent = pct + '%';
    document.getElementById('phaseLabel').textContent = phase;
    document.getElementById('eta').textContent = eta;
    document.getElementById('badgeScope').textContent = scope;
    document.getElementById('badgeOwner').textContent = 'Owner: ' + owner;
    document.getElementById('badgeClient').textContent = 'Client: ' + client;
    document.getElementById('barFill').style.setProperty('--bar', pct + '%');

    // Mark active step
    const steps = Array.from(document.querySelectorAll('.step'));
    steps.forEach(s => {
      const stepPhase = s.dataset.phase;
      const currentPhase = phase;
      
      s.classList.remove('active', 'complete');
      
      if (stepPhase === currentPhase) {
        s.classList.add('active');
      } else if (projectData.phases.find(p => p.name === stepPhase)?.status === 'complete') {
        s.classList.add('complete');
      }
    });

    // Development tracker functionality
    const devCheckboxes = document.querySelectorAll('.dev-checkbox');
    devCheckboxes.forEach(checkbox => {
      checkbox.addEventListener('change', function() {
        const task = this.dataset.task;
        const status = this.checked ? 'complete' : 'pending';
        
        // Update progress based on completed tasks
        updateProgress();
        
        // Save to localStorage
        localStorage.setItem(`inex-dev-${task}`, status);
      });
      
      // Load saved state
      const savedDevStatus = localStorage.getItem(`inex-dev-${checkbox.dataset.task}`);
      if (savedDevStatus === 'complete') {
        checkbox.checked = true;
      }
    });

    function updateProgress() {
      const totalTasks = devCheckboxes.length;
      const completedTasks = Array.from(devCheckboxes).filter(cb => cb.checked).length;
      const newProgress = Math.round((completedTasks / totalTasks) * 100);
      
      // Update progress ring and bar
      document.querySelector('.ring').style.setProperty('--p', newProgress);
      document.getElementById('pct').textContent = newProgress + '%';
      document.getElementById('barFill').style.setProperty('--bar', newProgress + '%');
      
      // Update project data
      projectData.progress = newProgress;
      
      // Save progress to localStorage
      localStorage.setItem('inex-project-progress', newProgress);
    }

    // Auto-save progress every 30 seconds
    setInterval(() => {
      localStorage.setItem('inex-project-data', JSON.stringify(projectData));
    }, 30000);

    // Listen for localStorage changes to update the page in real-time
    window.addEventListener('storage', function(e) {
      if (e.key === 'inex-project-progress') {
        const progress = parseInt(e.newValue || '5');
        document.querySelector('.ring').style.setProperty('--p', progress);
        document.getElementById('pct').textContent = progress + '%';
        document.getElementById('barFill').style.setProperty('--bar', progress + '%');
        
        // Update project data
        projectData.progress = progress;
      }
      if (e.key === 'inex-project-phase') {
        const phase = e.newValue || 'Phase 1';
        document.getElementById('phaseLabel').textContent = phase;
        
        // Update project data
        projectData.currentPhase = phase;
        
        // Update active step
        const steps = Array.from(document.querySelectorAll('.step'));
        steps.forEach(s => {
          const stepPhase = s.dataset.phase;
          const currentPhase = phase;
          
          s.classList.remove('active', 'complete');
          
          if (stepPhase === currentPhase) {
            s.classList.add('active');
          } else if (projectData.phases.find(p => p.name === stepPhase)?.status === 'complete') {
            s.classList.add('complete');
          }
        });
      }
      if (e.key === 'inex-project-status') {
        // Status updates could be displayed somewhere if needed
        console.log('Status updated:', e.newValue);
      }
      if (e.key === 'inex-project-updates') {
        try {
          const updates = JSON.parse(e.newValue || '[]');
          const updatesTable = document.getElementById('updates');
          updatesTable.innerHTML = '';
          
          updates.forEach(update => {
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
              <td>${update.date}</td>
              <td>${update.update}</td>
              <td><span class="pill">${update.status}</span></td>
            `;
            updatesTable.appendChild(newRow);
          });
          
          // Update project data
          projectData.updates = updates;
        } catch (e) {
          console.log('Error parsing updates');
        }
      }
    });

    // Load saved progress on page load (already loaded above, just update projectData)
    if (savedProgress) {
      projectData.progress = parseInt(savedProgress);
    } else {
      // Set default progress if none saved
      projectData.progress = 5;
    }

    // Load saved updates from localStorage
    const savedUpdates = localStorage.getItem('inex-project-updates');
    if (savedUpdates) {
      try {
        const updates = JSON.parse(savedUpdates);
        const updatesTable = document.getElementById('updates');
        updatesTable.innerHTML = ''; // Clear existing updates
        
        updates.forEach(update => {
          const newRow = document.createElement('tr');
          newRow.innerHTML = `
            <td>${update.date}</td>
            <td>${update.update}</td>
            <td><span class="pill">${update.status}</span></td>
          `;
          updatesTable.appendChild(newRow);
        });
        
        // Update project data
        projectData.updates = updates;
      } catch (e) {
        console.log('No saved updates found');
      }
    }

    // Load saved status from localStorage (already loaded above)
    // savedStatusValue is available from the earlier declaration

    // Add update functionality
    function addUpdate(date, update, status) {
      const updatesTable = document.getElementById('updates');
      const newRow = document.createElement('tr');
      newRow.innerHTML = `
        <td>${date}</td>
        <td>${update}</td>
        <td><span class="pill">${status}</span></td>
      `;
      updatesTable.appendChild(newRow);
      
      // Save to project data
      projectData.updates.push({ date, update, status });
    }

    // Example: Add a new update (you can call this from console or add a form)
    // addUpdate('Dec 18', 'Requirements document drafted', 'Complete');

    // Messaging System - Global API Integration
    const messageForm = document.getElementById('messageForm');
    const messagesList = document.getElementById('messagesList');
    const messageText = document.getElementById('messageText');
    const charCount = document.getElementById('charCount');

    // API endpoint for messages - detect development vs production
    const isDev = window.location.hostname === 'localhost' || 
                  window.location.hostname === '127.0.0.1' ||
                  window.location.port !== '';
    
    const API_BASE = isDev ? 'http://localhost:3000' : window.location.origin;
    const MESSAGES_API = `${API_BASE}/api/messages`;

    // Update character count
    messageText.addEventListener('input', function() {
      const textLength = this.value.length;
      charCount.textContent = `${textLength} characters`;
    });

    // Load messages from API
    async function loadMessages() {
      try {
        const response = await fetch(MESSAGES_API);
        if (!response.ok) {
          console.warn('Failed to fetch messages from API, falling back to localStorage');
          loadMessagesFromLocalStorage();
          return;
        }
        
        const data = await response.json();
        const messages = data.messages || [];
        displayMessages(messages);
        
        // Also save to localStorage as backup
        localStorage.setItem('inex-messages', JSON.stringify(messages));
        
      } catch (error) {
        console.warn('API unreachable, using localStorage fallback:', error);
        loadMessagesFromLocalStorage();
      }
    }

    // Fallback to localStorage
    function loadMessagesFromLocalStorage() {
      const savedMessages = localStorage.getItem('inex-messages') || '[]';
      const messages = JSON.parse(savedMessages);
      displayMessages(messages);
    }

    // Display messages
    function displayMessages(messages) {
      if (messages.length === 0) {
        messagesList.innerHTML = `
          <div style="text-align:center;padding:20px;color:var(--muted);font-size:13px">
            No messages yet. Send the first one!
          </div>
        `;
        return;
      }

      messagesList.innerHTML = messages.map(msg => `
        <div style="padding:12px;border:1px solid var(--border);border-radius:8px;margin-bottom:8px;background:rgba(255,255,255,.02)">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
            <strong style="font-size:13px;color:var(--accent)">${msg.name || 'Anonymous'}</strong>
            <small style="color:var(--muted);font-size:11px">${formatTimestamp(msg.timestamp)}</small>
          </div>
          <div style="font-size:13px;line-height:1.4">${msg.text}</div>
          ${msg.responses && msg.responses.length > 0 ? `
            <div style="margin-top:8px;padding-top:8px;border-top:1px solid var(--border);font-size:12px;color:var(--muted)">
              <strong>Response:</strong> ${msg.responses[msg.responses.length - 1].text}
            </div>
          ` : ''}
        </div>
      `).join('');
    }

    // Handle message form submission
    messageForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const nameInput = document.getElementById('messageName');
      const textInput = document.getElementById('messageText');
      
      const name = nameInput.value.trim() || 'Anonymous';
      const text = textInput.value.trim();
      
      if (!text) {
        alert('Please enter a message');
        return;
      }

      // Show loading state
      const submitBtn = messageForm.querySelector('button[type="submit"]');
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Sending...';
      submitBtn.disabled = true;

      try {
        // Try to send via API first
        const response = await fetch(MESSAGES_API, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: name,
            text: text,
            priority: 'normal',
            category: 'client-feedback'
          })
        });

        if (response.ok) {
          // API success - reload messages
          await loadMessages();
          showMessageSuccess('Message sent successfully! The development team will see it immediately.');
        } else {
          // API failed - fallback to localStorage
          throw new Error('API request failed');
        }
        
      } catch (error) {
        console.warn('API failed, using localStorage fallback:', error);
        
        // Fallback to localStorage
        const message = {
          name: name,
          text: text,
          timestamp: new Date().toISOString(),
          id: Date.now()
        };

        const savedMessages = localStorage.getItem('inex-messages') || '[]';
        const messages = JSON.parse(savedMessages);
        messages.unshift(message);
        
        localStorage.setItem('inex-messages', JSON.stringify(messages));
        displayMessages(messages);
        
        showMessageSuccess('Message sent successfully! (Local mode)');
      }

      // Reset form
      textInput.value = '';
      charCount.textContent = '0 characters';
      
      // Reset button
      submitBtn.innerHTML = originalText;
      submitBtn.disabled = false;
    });

    // Show success message
    function showMessageSuccess(message) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; background: var(--success); color: white;
        padding: 12px 16px; border-radius: 8px; z-index: 1000; font-weight: 600;
        animation: slideIn 0.3s ease-out;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => notification.remove(), 4000);
    }

    // Format timestamp
    function formatTimestamp(timestamp) {
      if (!timestamp) return 'Just now';
      
      try {
        const date = new Date(timestamp);
        const now = new Date();
        const diff = now - date;
        
        if (diff < 60000) return 'Just now';
        if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;
        if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;
        return date.toLocaleDateString();
      } catch (e) {
        return timestamp; // Return original if parsing fails
      }
    }

    // Listen for new messages from other windows
    window.addEventListener('storage', function(e) {
      if (e.key === 'inex-messages') {
        try {
          const messages = JSON.parse(e.newValue || '[]');
          displayMessages(messages);
        } catch (e) {
          console.log('Error parsing messages');
        }
      }
    });

    // Load messages on page load
    loadMessages();

    // Auto-refresh messages every 30 seconds
    setInterval(loadMessages, 30000);
  </script>
</body>
</html>


